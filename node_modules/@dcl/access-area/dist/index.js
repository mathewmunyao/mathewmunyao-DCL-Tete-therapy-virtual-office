define("@dcl/access-area",["exports","@decentraland/EthereumController","@decentraland/web3-provider","@decentraland/Identity","@dcl/crypto-scene-utils","@dcl/ecs-scene-utils","@dcl/ui-scene-utils","@decentraland/EnvironmentAPI"],(function(t,e,n,r,o,i,a,s){"use strict";function c(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var u=c(e),l=c(o),h=c(i),p=c(a),f=function(t,e){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},f(t,e)};function d(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function g(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function m(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var y={exports:{}};!function(t,e){!function(t){function e(t){if(t.jsonrpc="2.0",!t.id||"number"!=typeof t.id||Math.floor(t.id)!==t.id)throw new Error(`Invalid RPC message(invalid id) message: ${JSON.stringify(t)}`);if(!t.method||"string"!=typeof t.method||0===t.method.trim().length)throw new Error(`Invalid RPC message(invalid method) message: ${JSON.stringify(t)}`);if(!t.params||"object"!=typeof t.params)throw new Error(`Invalid RPC message(invalid params) message: ${JSON.stringify(t)}`);return t}function n(t,e){return t(e={exports:{}},e.exports),e.exports}var r,o=n((function(t,e){function n(){let t,e;const n=new Promise(((r,o)=>{t=t=>{r(t),n.isPending=!1},e=t=>{o(t),n.isPending=!1}})).catch((t=>Promise.reject(t)));return n.resolve=t,n.reject=e,"finally"in n||(n.finally=t=>{n.then(t),n.catch(t)}),n.isPending=!0,n}Object.defineProperty(e,"__esModule",{value:!0}),e.future=n,e.default=n}));(r=o)&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")&&r.default;var i=o.future,a="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function s(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}var u=s,l=c;function h(t){if(u===setTimeout)return setTimeout(t,0);if((u===s||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}"function"==typeof a.setTimeout&&(u=setTimeout),"function"==typeof a.clearTimeout&&(l=clearTimeout);var p,f=[],d=!1,g=-1;function m(){d&&p&&(d=!1,p.length?f=p.concat(f):g=-1,f.length&&y())}function y(){if(!d){var t=h(m);d=!0;for(var e=f.length;e;){for(p=f,f=[];++g<e;)p&&p[g].run();g=-1,e=f.length}p=null,d=!1,function(t){if(l===clearTimeout)return clearTimeout(t);if((l===c||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}(t)}}function w(t,e){this.fun=t,this.array=e}function v(){}w.prototype.run=function(){this.fun.apply(null,this.array)};var b=v,_=v,F=v,N=v,T=v,x=v,A=v,k=a.performance||{},E=k.now||k.mozNow||k.msNow||k.oNow||k.webkitNow||function(){return(new Date).getTime()},B=new Date,O={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new w(t,e)),1!==f.length||d||h(y)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:b,addListener:_,once:F,off:N,removeListener:T,removeAllListeners:x,emit:A,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*E.call(k),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-B)/1e3}},S=n((function(t){!function(){var e="input is invalid type",n="object"==typeof window,r=n?window:{};r.JS_SHA3_NO_WINDOW&&(n=!1);var o=!n&&"object"==typeof self;!r.JS_SHA3_NO_NODE_JS&&"object"==typeof O&&O.versions&&O.versions.node?r=a:o&&(r=self);var i=!r.JS_SHA3_NO_COMMON_JS&&t.exports,s=!r.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,c="0123456789abcdef".split(""),u=[4,1024,262144,67108864],l=[0,8,16,24],h=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],p=[224,256,384,512],f=[128,256],d=["hex","buffer","arrayBuffer","array","digest"],g={128:168,256:136};!r.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!s||!r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var m=function(t,e,n){return function(r){return new C(t,e,t).update(r)[n]()}},y=function(t,e,n){return function(r,o){return new C(t,e,o).update(r)[n]()}},w=function(t,e,n){return function(e,r,o,i){return N["cshake"+t].update(e,r,o,i)[n]()}},v=function(t,e,n){return function(e,r,o,i){return N["kmac"+t].update(e,r,o,i)[n]()}},b=function(t,e,n,r){for(var o=0;o<d.length;++o){var i=d[o];t[i]=e(n,r,i)}return t},_=function(t,e){var n=m(t,e,"hex");return n.create=function(){return new C(t,e,t)},n.update=function(t){return n.create().update(t)},b(n,m,t,e)},F=[{name:"keccak",padding:[1,256,65536,16777216],bits:p,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:p,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:f,createMethod:function(t,e){var n=y(t,e,"hex");return n.create=function(n){return new C(t,e,n)},n.update=function(t,e){return n.create(e).update(t)},b(n,y,t,e)}},{name:"cshake",padding:u,bits:f,createMethod:function(t,e){var n=g[t],r=w(t,0,"hex");return r.create=function(r,o,i){return o||i?new C(t,e,r).bytepad([o,i],n):N["shake"+t].create(r)},r.update=function(t,e,n,o){return r.create(e,n,o).update(t)},b(r,w,t,e)}},{name:"kmac",padding:u,bits:f,createMethod:function(t,e){var n=g[t],r=v(t,0,"hex");return r.create=function(r,o,i){return new M(t,e,o).bytepad(["KMAC",i],n).bytepad([r],n)},r.update=function(t,e,n,o){return r.create(t,n,o).update(e)},b(r,v,t,e)}}],N={},T=[],x=0;x<F.length;++x)for(var A=F[x],k=A.bits,E=0;E<k.length;++E){var B=A.name+"_"+k[E];if(T.push(B),N[B]=A.createMethod(k[E],A.padding),"sha3"!==A.name){var S=A.name+k[E];T.push(S),N[S]=N[B]}}function C(t,e,n){this.blocks=[],this.s=[],this.padding=e,this.outputBits=n,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(31&n)>>3;for(var r=0;r<50;++r)this.s[r]=0}function M(t,e,n){C.call(this,t,e,n)}C.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var n,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(e);if(null===t)throw new Error(e);if(s&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||s&&ArrayBuffer.isView(t)))throw new Error(e);n=!0}for(var o,i,a=this.blocks,c=this.byteCount,u=t.length,h=this.blockCount,p=0,f=this.s;p<u;){if(this.reset)for(this.reset=!1,a[0]=this.block,o=1;o<h+1;++o)a[o]=0;if(n)for(o=this.start;p<u&&o<c;++p)a[o>>2]|=t[p]<<l[3&o++];else for(o=this.start;p<u&&o<c;++p)(i=t.charCodeAt(p))<128?a[o>>2]|=i<<l[3&o++]:i<2048?(a[o>>2]|=(192|i>>6)<<l[3&o++],a[o>>2]|=(128|63&i)<<l[3&o++]):i<55296||i>=57344?(a[o>>2]|=(224|i>>12)<<l[3&o++],a[o>>2]|=(128|i>>6&63)<<l[3&o++],a[o>>2]|=(128|63&i)<<l[3&o++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++p)),a[o>>2]|=(240|i>>18)<<l[3&o++],a[o>>2]|=(128|i>>12&63)<<l[3&o++],a[o>>2]|=(128|i>>6&63)<<l[3&o++],a[o>>2]|=(128|63&i)<<l[3&o++]);if(this.lastByteIndex=o,o>=c){for(this.start=o-c,this.block=a[h],o=0;o<h;++o)f[o]^=a[o];I(f),this.reset=!0}else this.start=o}return this},C.prototype.encode=function(t,e){var n=255&t,r=1,o=[n];for(n=255&(t>>=8);n>0;)o.unshift(n),n=255&(t>>=8),++r;return e?o.push(r):o.unshift(r),this.update(o),o.length},C.prototype.encodeString=function(t){var n,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(e);if(null===t)throw new Error(e);if(s&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||s&&ArrayBuffer.isView(t)))throw new Error(e);n=!0}var o=0,i=t.length;if(n)o=i;else for(var a=0;a<t.length;++a){var c=t.charCodeAt(a);c<128?o+=1:c<2048?o+=2:c<55296||c>=57344?o+=3:(c=65536+((1023&c)<<10|1023&t.charCodeAt(++a)),o+=4)}return o+=this.encode(8*o),this.update(t),o},C.prototype.bytepad=function(t,e){for(var n=this.encode(e),r=0;r<t.length;++r)n+=this.encodeString(t[r]);var o=e-n%e,i=[];return i.length=o,this.update(i),this},C.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,n=this.blockCount,r=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[n],e=1;e<n+1;++e)t[e]=0;for(t[n-1]|=2147483648,e=0;e<n;++e)r[e]^=t[e];I(r)}},C.prototype.toString=C.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,n=this.s,r=this.outputBlocks,o=this.extraBytes,i=0,a=0,s="";a<r;){for(i=0;i<e&&a<r;++i,++a)t=n[i],s+=c[t>>4&15]+c[15&t]+c[t>>12&15]+c[t>>8&15]+c[t>>20&15]+c[t>>16&15]+c[t>>28&15]+c[t>>24&15];a%e==0&&(I(n),i=0)}return o&&(t=n[i],s+=c[t>>4&15]+c[15&t],o>1&&(s+=c[t>>12&15]+c[t>>8&15]),o>2&&(s+=c[t>>20&15]+c[t>>16&15])),s},C.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,n=this.s,r=this.outputBlocks,o=this.extraBytes,i=0,a=0,s=this.outputBits>>3;t=o?new ArrayBuffer(r+1<<2):new ArrayBuffer(s);for(var c=new Uint32Array(t);a<r;){for(i=0;i<e&&a<r;++i,++a)c[a]=n[i];a%e==0&&I(n)}return o&&(c[i]=n[i],t=t.slice(0,s)),t},C.prototype.buffer=C.prototype.arrayBuffer,C.prototype.digest=C.prototype.array=function(){this.finalize();for(var t,e,n=this.blockCount,r=this.s,o=this.outputBlocks,i=this.extraBytes,a=0,s=0,c=[];s<o;){for(a=0;a<n&&s<o;++a,++s)t=s<<2,e=r[a],c[t]=255&e,c[t+1]=e>>8&255,c[t+2]=e>>16&255,c[t+3]=e>>24&255;s%n==0&&I(r)}return i&&(t=s<<2,e=r[a],c[t]=255&e,i>1&&(c[t+1]=e>>8&255),i>2&&(c[t+2]=e>>16&255)),c},M.prototype=new C,M.prototype.finalize=function(){return this.encode(this.outputBits,!0),C.prototype.finalize.call(this)};var I=function(t){var e,n,r,o,i,a,s,c,u,l,p,f,d,g,m,y,w,v,b,_,F,N,T,x,A,k,E,B,O,S,C,M,I,R,P,j,U,D,L,q,H,$,G,z,W,J,V,Y,K,Z,X,Q,tt,et,nt,rt,ot,it,at,st,ct,ut,lt;for(r=0;r<48;r+=2)o=t[0]^t[10]^t[20]^t[30]^t[40],i=t[1]^t[11]^t[21]^t[31]^t[41],a=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],c=t[4]^t[14]^t[24]^t[34]^t[44],u=t[5]^t[15]^t[25]^t[35]^t[45],l=t[6]^t[16]^t[26]^t[36]^t[46],p=t[7]^t[17]^t[27]^t[37]^t[47],e=(f=t[8]^t[18]^t[28]^t[38]^t[48])^(a<<1|s>>>31),n=(d=t[9]^t[19]^t[29]^t[39]^t[49])^(s<<1|a>>>31),t[0]^=e,t[1]^=n,t[10]^=e,t[11]^=n,t[20]^=e,t[21]^=n,t[30]^=e,t[31]^=n,t[40]^=e,t[41]^=n,e=o^(c<<1|u>>>31),n=i^(u<<1|c>>>31),t[2]^=e,t[3]^=n,t[12]^=e,t[13]^=n,t[22]^=e,t[23]^=n,t[32]^=e,t[33]^=n,t[42]^=e,t[43]^=n,e=a^(l<<1|p>>>31),n=s^(p<<1|l>>>31),t[4]^=e,t[5]^=n,t[14]^=e,t[15]^=n,t[24]^=e,t[25]^=n,t[34]^=e,t[35]^=n,t[44]^=e,t[45]^=n,e=c^(f<<1|d>>>31),n=u^(d<<1|f>>>31),t[6]^=e,t[7]^=n,t[16]^=e,t[17]^=n,t[26]^=e,t[27]^=n,t[36]^=e,t[37]^=n,t[46]^=e,t[47]^=n,e=l^(o<<1|i>>>31),n=p^(i<<1|o>>>31),t[8]^=e,t[9]^=n,t[18]^=e,t[19]^=n,t[28]^=e,t[29]^=n,t[38]^=e,t[39]^=n,t[48]^=e,t[49]^=n,g=t[0],m=t[1],J=t[11]<<4|t[10]>>>28,V=t[10]<<4|t[11]>>>28,B=t[20]<<3|t[21]>>>29,O=t[21]<<3|t[20]>>>29,st=t[31]<<9|t[30]>>>23,ct=t[30]<<9|t[31]>>>23,$=t[40]<<18|t[41]>>>14,G=t[41]<<18|t[40]>>>14,R=t[2]<<1|t[3]>>>31,P=t[3]<<1|t[2]>>>31,y=t[13]<<12|t[12]>>>20,w=t[12]<<12|t[13]>>>20,Y=t[22]<<10|t[23]>>>22,K=t[23]<<10|t[22]>>>22,S=t[33]<<13|t[32]>>>19,C=t[32]<<13|t[33]>>>19,ut=t[42]<<2|t[43]>>>30,lt=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,nt=t[4]<<30|t[5]>>>2,j=t[14]<<6|t[15]>>>26,U=t[15]<<6|t[14]>>>26,v=t[25]<<11|t[24]>>>21,b=t[24]<<11|t[25]>>>21,Z=t[34]<<15|t[35]>>>17,X=t[35]<<15|t[34]>>>17,M=t[45]<<29|t[44]>>>3,I=t[44]<<29|t[45]>>>3,x=t[6]<<28|t[7]>>>4,A=t[7]<<28|t[6]>>>4,rt=t[17]<<23|t[16]>>>9,ot=t[16]<<23|t[17]>>>9,D=t[26]<<25|t[27]>>>7,L=t[27]<<25|t[26]>>>7,_=t[36]<<21|t[37]>>>11,F=t[37]<<21|t[36]>>>11,Q=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,z=t[8]<<27|t[9]>>>5,W=t[9]<<27|t[8]>>>5,k=t[18]<<20|t[19]>>>12,E=t[19]<<20|t[18]>>>12,it=t[29]<<7|t[28]>>>25,at=t[28]<<7|t[29]>>>25,q=t[38]<<8|t[39]>>>24,H=t[39]<<8|t[38]>>>24,N=t[48]<<14|t[49]>>>18,T=t[49]<<14|t[48]>>>18,t[0]=g^~y&v,t[1]=m^~w&b,t[10]=x^~k&B,t[11]=A^~E&O,t[20]=R^~j&D,t[21]=P^~U&L,t[30]=z^~J&Y,t[31]=W^~V&K,t[40]=et^~rt&it,t[41]=nt^~ot&at,t[2]=y^~v&_,t[3]=w^~b&F,t[12]=k^~B&S,t[13]=E^~O&C,t[22]=j^~D&q,t[23]=U^~L&H,t[32]=J^~Y&Z,t[33]=V^~K&X,t[42]=rt^~it&st,t[43]=ot^~at&ct,t[4]=v^~_&N,t[5]=b^~F&T,t[14]=B^~S&M,t[15]=O^~C&I,t[24]=D^~q&$,t[25]=L^~H&G,t[34]=Y^~Z&Q,t[35]=K^~X&tt,t[44]=it^~st&ut,t[45]=at^~ct&lt,t[6]=_^~N&g,t[7]=F^~T&m,t[16]=S^~M&x,t[17]=C^~I&A,t[26]=q^~$&R,t[27]=H^~G&P,t[36]=Z^~Q&z,t[37]=X^~tt&W,t[46]=st^~ut&et,t[47]=ct^~lt&nt,t[8]=N^~g&y,t[9]=T^~m&w,t[18]=M^~x&k,t[19]=I^~A&E,t[28]=$^~R&j,t[29]=G^~P&U,t[38]=Q^~z&J,t[39]=tt^~W&V,t[48]=ut^~et&rt,t[49]=lt^~nt&ot,t[0]^=h[r],t[1]^=h[r+1]};if(i)t.exports=N;else for(x=0;x<T.length;++x)r[T[x]]=N[T[x]]}()}));S.keccak_224,S.keccak224,S.keccak_256;var C=S.keccak256;S.keccak_384,S.keccak384,S.keccak_512,S.keccak512,S.sha3_224,S.sha3_256,S.sha3_384,S.sha3_512,S.shake_128,S.shake128,S.shake_256,S.shake256,S.cshake_128,S.cshake128,S.cshake_256,S.cshake256,S.kmac_128,S.kmac128,S.kmac_256,S.kmac256;var M=n((function(t){!function(e){var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,i=Math.floor,a="[BigNumber Error] ",s=a+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,l=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7,f=1e9;function d(t){var e=0|t;return t>0||t===e?e:e-1}function g(t){for(var e,n,r=1,o=t.length,i=t[0]+"";r<o;){for(e=t[r++]+"",n=u-e.length;n--;e="0"+e);i+=e}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function m(t,e){var n,r,o=t.c,i=e.c,a=t.s,s=e.s,c=t.e,u=e.e;if(!a||!s)return null;if(n=o&&!o[0],r=i&&!i[0],n||r)return n?r?0:-s:a;if(a!=s)return a;if(n=a<0,r=c==u,!o||!i)return r?0:!o^n?1:-1;if(!r)return c>u^n?1:-1;for(s=(c=o.length)<(u=i.length)?c:u,a=0;a<s;a++)if(o[a]!=i[a])return o[a]>i[a]^n?1:-1;return c==u?0:c>u^n?1:-1}function y(t,e,n,r){if(t<e||t>n||t!==i(t))throw Error(a+(r||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function w(t){var e=t.c.length-1;return d(t.e/u)==e&&t.c[e]%2!=0}function v(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function b(t,e,n){var r,o;if(e<0){for(o=n+".";++e;o+=n);t=o+t}else if(++e>(r=t.length)){for(o=n,e-=r;--e;o+=n);t+=o}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}(n=function t(e){var n,_,F,N,T,x,A,k,E,B,O=$.prototype={constructor:$,toString:null,valueOf:null},S=new $(1),C=20,M=4,I=-7,R=21,P=-1e7,j=1e7,U=!1,D=1,L=0,q={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz";function $(t,e){var n,o,a,c,h,p,f,d,g=this;if(!(g instanceof $))return new $(t,e);if(null==e){if(t&&!0===t._isBigNumber)return g.s=t.s,void(!t.c||t.e>j?g.c=g.e=null:t.e<P?g.c=[g.e=0]:(g.e=t.e,g.c=t.c.slice()));if((p="number"==typeof t)&&0*t==0){if(g.s=1/t<0?(t=-t,-1):1,t===~~t){for(c=0,h=t;h>=10;h/=10,c++);return void(c>j?g.c=g.e=null:(g.e=c,g.c=[t]))}d=String(t)}else{if(!r.test(d=String(t)))return F(g,d,p);g.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(c=d.indexOf("."))>-1&&(d=d.replace(".","")),(h=d.search(/e/i))>0?(c<0&&(c=h),c+=+d.slice(h+1),d=d.substring(0,h)):c<0&&(c=d.length)}else{if(y(e,2,H.length,"Base"),10==e)return J(g=new $(t),C+g.e+1,M);if(d=String(t),p="number"==typeof t){if(0*t!=0)return F(g,d,p,e);if(g.s=1/t<0?(d=d.slice(1),-1):1,$.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(s+t)}else g.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(n=H.slice(0,e),c=h=0,f=d.length;h<f;h++)if(n.indexOf(o=d.charAt(h))<0){if("."==o){if(h>c){c=f;continue}}else if(!a&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){a=!0,h=-1,c=0;continue}return F(g,String(t),p,e)}p=!1,(c=(d=_(d,e,10,g.s)).indexOf("."))>-1?d=d.replace(".",""):c=d.length}for(h=0;48===d.charCodeAt(h);h++);for(f=d.length;48===d.charCodeAt(--f););if(d=d.slice(h,++f)){if(f-=h,p&&$.DEBUG&&f>15&&(t>l||t!==i(t)))throw Error(s+g.s*t);if((c=c-h-1)>j)g.c=g.e=null;else if(c<P)g.c=[g.e=0];else{if(g.e=c,g.c=[],h=(c+1)%u,c<0&&(h+=u),h<f){for(h&&g.c.push(+d.slice(0,h)),f-=u;h<f;)g.c.push(+d.slice(h,h+=u));h=u-(d=d.slice(h)).length}else h-=f;for(;h--;d+="0");g.c.push(+d)}}else g.c=[g.e=0]}function G(t,e,n,r){var o,i,a,s,c;if(null==n?n=M:y(n,0,8),!t.c)return t.toString();if(o=t.c[0],a=t.e,null==e)c=g(t.c),c=1==r||2==r&&(a<=I||a>=R)?v(c,a):b(c,a,"0");else if(i=(t=J(new $(t),e,n)).e,s=(c=g(t.c)).length,1==r||2==r&&(e<=i||i<=I)){for(;s<e;c+="0",s++);c=v(c,i)}else if(e-=a,c=b(c,i,"0"),i+1>s){if(--e>0)for(c+=".";e--;c+="0");}else if((e+=i-s)>0)for(i+1==s&&(c+=".");e--;c+="0");return t.s<0&&o?"-"+c:c}function z(t,e){for(var n,r=1,o=new $(t[0]);r<t.length;r++){if(!(n=new $(t[r])).s){o=n;break}e.call(o,n)&&(o=n)}return o}function W(t,e,n){for(var r=1,o=e.length;!e[--o];e.pop());for(o=e[0];o>=10;o/=10,r++);return(n=r+n*u-1)>j?t.c=t.e=null:n<P?t.c=[t.e=0]:(t.e=n,t.c=e),t}function J(t,e,n,r){var a,s,l,p,f,d,g,m=t.c,y=h;if(m){t:{for(a=1,p=m[0];p>=10;p/=10,a++);if((s=e-a)<0)s+=u,l=e,g=(f=m[d=0])/y[a-l-1]%10|0;else if((d=o((s+1)/u))>=m.length){if(!r)break t;for(;m.length<=d;m.push(0));f=g=0,a=1,l=(s%=u)-u+1}else{for(f=p=m[d],a=1;p>=10;p/=10,a++);g=(l=(s%=u)-u+a)<0?0:f/y[a-l-1]%10|0}if(r=r||e<0||null!=m[d+1]||(l<0?f:f%y[a-l-1]),r=n<4?(g||r)&&(0==n||n==(t.s<0?3:2)):g>5||5==g&&(4==n||r||6==n&&(s>0?l>0?f/y[a-l]:0:m[d-1])%10&1||n==(t.s<0?8:7)),e<1||!m[0])return m.length=0,r?(e-=t.e+1,m[0]=y[(u-e%u)%u],t.e=-e||0):m[0]=t.e=0,t;if(0==s?(m.length=d,p=1,d--):(m.length=d+1,p=y[u-s],m[d]=l>0?i(f/y[a-l]%y[l])*p:0),r)for(;;){if(0==d){for(s=1,l=m[0];l>=10;l/=10,s++);for(l=m[0]+=p,p=1;l>=10;l/=10,p++);s!=p&&(t.e++,m[0]==c&&(m[0]=1));break}if(m[d]+=p,m[d]!=c)break;m[d--]=0,p=1}for(s=m.length;0===m[--s];m.pop());}t.e>j?t.c=t.e=null:t.e<P&&(t.c=[t.e=0])}return t}function V(t){var e,n=t.e;return null===n?t.toString():(e=g(t.c),e=n<=I||n>=R?v(e,n):b(e,n,"0"),t.s<0?"-"+e:e)}return $.clone=t,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(a+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(y(n=t[e],0,f,e),C=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(y(n=t[e],0,8,e),M=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(y(n[0],-f,0,e),y(n[1],0,f,e),I=n[0],R=n[1]):(y(n,-f,f,e),I=-(R=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if((n=t[e])&&n.pop)y(n[0],-f,-1,e),y(n[1],1,f,e),P=n[0],j=n[1];else{if(y(n,-f,f,e),!n)throw Error(a+e+" cannot be zero: "+n);P=-(j=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(a+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw U=!n,Error(a+"crypto unavailable");U=n}else U=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(y(n=t[e],0,9,e),D=n),t.hasOwnProperty(e="POW_PRECISION")&&(y(n=t[e],0,f,e),L=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(a+e+" not an object: "+n);q=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(a+e+" invalid: "+n);H=n}}return{DECIMAL_PLACES:C,ROUNDING_MODE:M,EXPONENTIAL_AT:[I,R],RANGE:[P,j],CRYPTO:U,MODULO_MODE:D,POW_PRECISION:L,FORMAT:q,ALPHABET:H}},$.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!$.DEBUG)return!0;var e,n,r=t.c,o=t.e,s=t.s;t:if("[object Array]"=={}.toString.call(r)){if((1===s||-1===s)&&o>=-f&&o<=f&&o===i(o)){if(0===r[0]){if(0===o&&1===r.length)return!0;break t}if((e=(o+1)%u)<1&&(e+=u),String(r[0]).length==e){for(e=0;e<r.length;e++)if((n=r[e])<0||n>=c||n!==i(n))break t;if(0!==n)return!0}}}else if(null===r&&null===o&&(null===s||1===s||-1===s))return!0;throw Error(a+"Invalid BigNumber: "+t)},$.maximum=$.max=function(){return z(arguments,O.lt)},$.minimum=$.min=function(){return z(arguments,O.gt)},$.random=(N=9007199254740992,T=Math.random()*N&2097151?function(){return i(Math.random()*N)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,r,s,c,l=0,p=[],d=new $(S);if(null==t?t=C:y(t,0,f),s=o(t/u),U)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(s*=2));l<s;)(c=131072*e[l]+(e[l+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[l]=n[0],e[l+1]=n[1]):(p.push(c%1e14),l+=2);l=s/2}else{if(!crypto.randomBytes)throw U=!1,Error(a+"crypto unavailable");for(e=crypto.randomBytes(s*=7);l<s;)(c=281474976710656*(31&e[l])+1099511627776*e[l+1]+4294967296*e[l+2]+16777216*e[l+3]+(e[l+4]<<16)+(e[l+5]<<8)+e[l+6])>=9e15?crypto.randomBytes(7).copy(e,l):(p.push(c%1e14),l+=7);l=s/7}if(!U)for(;l<s;)(c=T())<9e15&&(p[l++]=c%1e14);for(s=p[--l],t%=u,s&&t&&(c=h[u-t],p[l]=i(s/c)*c);0===p[l];p.pop(),l--);if(l<0)p=[r=0];else{for(r=-1;0===p[0];p.splice(0,1),r-=u);for(l=1,c=p[0];c>=10;c/=10,l++);l<u&&(r-=u-l)}return d.e=r,d.c=p,d}),$.sum=function(){for(var t=1,e=arguments,n=new $(e[0]);t<e.length;)n=n.plus(e[t++]);return n},_=function(){var t="0123456789";function e(t,e,n,r){for(var o,i,a=[0],s=0,c=t.length;s<c;){for(i=a.length;i--;a[i]*=e);for(a[0]+=r.indexOf(t.charAt(s++)),o=0;o<a.length;o++)a[o]>n-1&&(null==a[o+1]&&(a[o+1]=0),a[o+1]+=a[o]/n|0,a[o]%=n)}return a.reverse()}return function(r,o,i,a,s){var c,u,l,h,p,f,d,m,y=r.indexOf("."),w=C,v=M;for(y>=0&&(h=L,L=0,r=r.replace(".",""),f=(m=new $(o)).pow(r.length-y),L=h,m.c=e(b(g(f.c),f.e,"0"),10,i,t),m.e=m.c.length),l=h=(d=e(r,o,i,s?(c=H,t):(c=t,H))).length;0==d[--h];d.pop());if(!d[0])return c.charAt(0);if(y<0?--l:(f.c=d,f.e=l,f.s=a,d=(f=n(f,m,w,v,i)).c,p=f.r,l=f.e),y=d[u=l+w+1],h=i/2,p=p||u<0||null!=d[u+1],p=v<4?(null!=y||p)&&(0==v||v==(f.s<0?3:2)):y>h||y==h&&(4==v||p||6==v&&1&d[u-1]||v==(f.s<0?8:7)),u<1||!d[0])r=p?b(c.charAt(1),-w,c.charAt(0)):c.charAt(0);else{if(d.length=u,p)for(--i;++d[--u]>i;)d[u]=0,u||(++l,d=[1].concat(d));for(h=d.length;!d[--h];);for(y=0,r="";y<=h;r+=c.charAt(d[y++]));r=b(r,l,c.charAt(0))}return r}}(),n=function(){function t(t,e,n){var r,o,i,a,s=0,c=t.length,u=e%p,l=e/p|0;for(t=t.slice();c--;)s=((o=u*(i=t[c]%p)+(r=l*i+(a=t[c]/p|0)*u)%p*p+s)/n|0)+(r/p|0)+l*a,t[c]=o%n;return s&&(t=[s].concat(t)),t}function e(t,e,n,r){var o,i;if(n!=r)i=n>r?1:-1;else for(o=i=0;o<n;o++)if(t[o]!=e[o]){i=t[o]>e[o]?1:-1;break}return i}function n(t,e,n,r){for(var o=0;n--;)t[n]-=o,o=t[n]<e[n]?1:0,t[n]=o*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,o,a,s,l){var h,p,f,g,m,y,w,v,b,_,F,N,T,x,A,k,E,B=r.s==o.s?1:-1,O=r.c,S=o.c;if(!(O&&O[0]&&S&&S[0]))return new $(r.s&&o.s&&(O?!S||O[0]!=S[0]:S)?O&&0==O[0]||!S?0*B:B/0:NaN);for(b=(v=new $(B)).c=[],B=a+(p=r.e-o.e)+1,l||(l=c,p=d(r.e/u)-d(o.e/u),B=B/u|0),f=0;S[f]==(O[f]||0);f++);if(S[f]>(O[f]||0)&&p--,B<0)b.push(1),g=!0;else{for(x=O.length,k=S.length,f=0,B+=2,(m=i(l/(S[0]+1)))>1&&(S=t(S,m,l),O=t(O,m,l),k=S.length,x=O.length),T=k,F=(_=O.slice(0,k)).length;F<k;_[F++]=0);E=S.slice(),E=[0].concat(E),A=S[0],S[1]>=l/2&&A++;do{if(m=0,(h=e(S,_,k,F))<0){if(N=_[0],k!=F&&(N=N*l+(_[1]||0)),(m=i(N/A))>1)for(m>=l&&(m=l-1),w=(y=t(S,m,l)).length,F=_.length;1==e(y,_,w,F);)m--,n(y,k<w?E:S,w,l),w=y.length,h=1;else 0==m&&(h=m=1),w=(y=S.slice()).length;if(w<F&&(y=[0].concat(y)),n(_,y,F,l),F=_.length,-1==h)for(;e(S,_,k,F)<1;)m++,n(_,k<F?E:S,F,l),F=_.length}else 0===h&&(m++,_=[0]);b[f++]=m,_[0]?_[F++]=O[T]||0:(_=[O[T]],F=1)}while((T++<x||null!=_[0])&&B--);g=null!=_[0],b[0]||b.splice(0,1)}if(l==c){for(f=1,B=b[0];B>=10;B/=10,f++);J(v,a+(v.e=f+p*u-1)+1,s,g)}else v.e=p,v.r=+g;return v}}(),x=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,k=/^\.([^.]+)$/,E=/^-?(Infinity|NaN)$/,B=/^\s*\+(?=[\w.])|^\s+|\s+$/g,F=function(t,e,n,r){var o,i=n?e:e.replace(B,"");if(E.test(i))t.s=isNaN(i)?null:i<0?-1:1;else{if(!n&&(i=i.replace(x,(function(t,e,n){return o="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=o?t:e})),r&&(o=r,i=i.replace(A,"$1").replace(k,"0.$1")),e!=i))return new $(i,o);if($.DEBUG)throw Error(a+"Not a"+(r?" base "+r:"")+" number: "+e);t.s=null}t.c=t.e=null},O.absoluteValue=O.abs=function(){var t=new $(this);return t.s<0&&(t.s=1),t},O.comparedTo=function(t,e){return m(this,new $(t,e))},O.decimalPlaces=O.dp=function(t,e){var n,r,o,i=this;if(null!=t)return y(t,0,f),null==e?e=M:y(e,0,8),J(new $(i),t+i.e+1,e);if(!(n=i.c))return null;if(r=((o=n.length-1)-d(this.e/u))*u,o=n[o])for(;o%10==0;o/=10,r--);return r<0&&(r=0),r},O.dividedBy=O.div=function(t,e){return n(this,new $(t,e),C,M)},O.dividedToIntegerBy=O.idiv=function(t,e){return n(this,new $(t,e),0,1)},O.exponentiatedBy=O.pow=function(t,e){var n,r,s,c,l,h,p,f,d=this;if((t=new $(t)).c&&!t.isInteger())throw Error(a+"Exponent not an integer: "+V(t));if(null!=e&&(e=new $(e)),l=t.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!t.c||!t.c[0])return f=new $(Math.pow(+V(d),l?2-w(t):+V(t))),e?f.mod(e):f;if(h=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new $(NaN);(r=!h&&d.isInteger()&&e.isInteger())&&(d=d.mod(e))}else{if(t.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||l&&d.c[1]>=24e7:d.c[0]<8e13||l&&d.c[0]<=9999975e7)))return c=d.s<0&&w(t)?-0:0,d.e>-1&&(c=1/c),new $(h?1/c:c);L&&(c=o(L/u+2))}for(l?(n=new $(.5),h&&(t.s=1),p=w(t)):p=(s=Math.abs(+V(t)))%2,f=new $(S);;){if(p){if(!(f=f.times(d)).c)break;c?f.c.length>c&&(f.c.length=c):r&&(f=f.mod(e))}if(s){if(0===(s=i(s/2)))break;p=s%2}else if(J(t=t.times(n),t.e+1,1),t.e>14)p=w(t);else{if(0==(s=+V(t)))break;p=s%2}d=d.times(d),c?d.c&&d.c.length>c&&(d.c.length=c):r&&(d=d.mod(e))}return r?f:(h&&(f=S.div(f)),e?f.mod(e):c?J(f,L,M,void 0):f)},O.integerValue=function(t){var e=new $(this);return null==t?t=M:y(t,0,8),J(e,e.e+1,t)},O.isEqualTo=O.eq=function(t,e){return 0===m(this,new $(t,e))},O.isFinite=function(){return!!this.c},O.isGreaterThan=O.gt=function(t,e){return m(this,new $(t,e))>0},O.isGreaterThanOrEqualTo=O.gte=function(t,e){return 1===(e=m(this,new $(t,e)))||0===e},O.isInteger=function(){return!!this.c&&d(this.e/u)>this.c.length-2},O.isLessThan=O.lt=function(t,e){return m(this,new $(t,e))<0},O.isLessThanOrEqualTo=O.lte=function(t,e){return-1===(e=m(this,new $(t,e)))||0===e},O.isNaN=function(){return!this.s},O.isNegative=function(){return this.s<0},O.isPositive=function(){return this.s>0},O.isZero=function(){return!!this.c&&0==this.c[0]},O.minus=function(t,e){var n,r,o,i,a=this,s=a.s;if(e=(t=new $(t,e)).s,!s||!e)return new $(NaN);if(s!=e)return t.s=-e,a.plus(t);var l=a.e/u,h=t.e/u,p=a.c,f=t.c;if(!l||!h){if(!p||!f)return p?(t.s=-e,t):new $(f?a:NaN);if(!p[0]||!f[0])return f[0]?(t.s=-e,t):new $(p[0]?a:3==M?-0:0)}if(l=d(l),h=d(h),p=p.slice(),s=l-h){for((i=s<0)?(s=-s,o=p):(h=l,o=f),o.reverse(),e=s;e--;o.push(0));o.reverse()}else for(r=(i=(s=p.length)<(e=f.length))?s:e,s=e=0;e<r;e++)if(p[e]!=f[e]){i=p[e]<f[e];break}if(i&&(o=p,p=f,f=o,t.s=-t.s),(e=(r=f.length)-(n=p.length))>0)for(;e--;p[n++]=0);for(e=c-1;r>s;){if(p[--r]<f[r]){for(n=r;n&&!p[--n];p[n]=e);--p[n],p[r]+=c}p[r]-=f[r]}for(;0==p[0];p.splice(0,1),--h);return p[0]?W(t,p,h):(t.s=3==M?-1:1,t.c=[t.e=0],t)},O.modulo=O.mod=function(t,e){var r,o,i=this;return t=new $(t,e),!i.c||!t.s||t.c&&!t.c[0]?new $(NaN):!t.c||i.c&&!i.c[0]?new $(i):(9==D?(o=t.s,t.s=1,r=n(i,t,0,3),t.s=o,r.s*=o):r=n(i,t,0,D),(t=i.minus(r.times(t))).c[0]||1!=D||(t.s=i.s),t)},O.multipliedBy=O.times=function(t,e){var n,r,o,i,a,s,l,h,f,g,m,y,w,v,b,_=this,F=_.c,N=(t=new $(t,e)).c;if(!(F&&N&&F[0]&&N[0]))return!_.s||!t.s||F&&!F[0]&&!N||N&&!N[0]&&!F?t.c=t.e=t.s=null:(t.s*=_.s,F&&N?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=d(_.e/u)+d(t.e/u),t.s*=_.s,(l=F.length)<(g=N.length)&&(w=F,F=N,N=w,o=l,l=g,g=o),o=l+g,w=[];o--;w.push(0));for(v=c,b=p,o=g;--o>=0;){for(n=0,m=N[o]%b,y=N[o]/b|0,i=o+(a=l);i>o;)n=((h=m*(h=F[--a]%b)+(s=y*h+(f=F[a]/b|0)*m)%b*b+w[i]+n)/v|0)+(s/b|0)+y*f,w[i--]=h%v;w[i]=n}return n?++r:w.splice(0,1),W(t,w,r)},O.negated=function(){var t=new $(this);return t.s=-t.s||null,t},O.plus=function(t,e){var n,r=this,o=r.s;if(e=(t=new $(t,e)).s,!o||!e)return new $(NaN);if(o!=e)return t.s=-e,r.minus(t);var i=r.e/u,a=t.e/u,s=r.c,l=t.c;if(!i||!a){if(!s||!l)return new $(o/0);if(!s[0]||!l[0])return l[0]?t:new $(s[0]?r:0*o)}if(i=d(i),a=d(a),s=s.slice(),o=i-a){for(o>0?(a=i,n=l):(o=-o,n=s),n.reverse();o--;n.push(0));n.reverse()}for((o=s.length)-(e=l.length)<0&&(n=l,l=s,s=n,e=o),o=0;e;)o=(s[--e]=s[e]+l[e]+o)/c|0,s[e]=c===s[e]?0:s[e]%c;return o&&(s=[o].concat(s),++a),W(t,s,a)},O.precision=O.sd=function(t,e){var n,r,o,i=this;if(null!=t&&t!==!!t)return y(t,1,f),null==e?e=M:y(e,0,8),J(new $(i),t,e);if(!(n=i.c))return null;if(r=(o=n.length-1)*u+1,o=n[o]){for(;o%10==0;o/=10,r--);for(o=n[0];o>=10;o/=10,r++);}return t&&i.e+1>r&&(r=i.e+1),r},O.shiftedBy=function(t){return y(t,-9007199254740991,l),this.times("1e"+t)},O.squareRoot=O.sqrt=function(){var t,e,r,o,i,a=this,s=a.c,c=a.s,u=a.e,l=C+4,h=new $("0.5");if(1!==c||!s||!s[0])return new $(!c||c<0&&(!s||s[0])?NaN:s?a:1/0);if(0==(c=Math.sqrt(+V(a)))||c==1/0?(((e=g(s)).length+u)%2==0&&(e+="0"),c=Math.sqrt(+e),u=d((u+1)/2)-(u<0||u%2),r=new $(e=c==1/0?"5e"+u:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+u)):r=new $(c+""),r.c[0])for((c=(u=r.e)+l)<3&&(c=0);;)if(i=r,r=h.times(i.plus(n(a,i,l,1))),g(i.c).slice(0,c)===(e=g(r.c)).slice(0,c)){if(r.e<u&&--c,"9999"!=(e=e.slice(c-3,c+1))&&(o||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(J(r,r.e+C+2,1),t=!r.times(r).eq(a));break}if(!o&&(J(i,i.e+C+2,0),i.times(i).eq(a))){r=i;break}l+=4,c+=4,o=1}return J(r,r.e+C+1,M,t)},O.toExponential=function(t,e){return null!=t&&(y(t,0,f),t++),G(this,t,e,1)},O.toFixed=function(t,e){return null!=t&&(y(t,0,f),t=t+this.e+1),G(this,t,e)},O.toFormat=function(t,e,n){var r,o=this;if(null==n)null!=t&&e&&"object"==typeof e?(n=e,e=null):t&&"object"==typeof t?(n=t,t=e=null):n=q;else if("object"!=typeof n)throw Error(a+"Argument not an object: "+n);if(r=o.toFixed(t,e),o.c){var i,s=r.split("."),c=+n.groupSize,u=+n.secondaryGroupSize,l=n.groupSeparator||"",h=s[0],p=s[1],f=o.s<0,d=f?h.slice(1):h,g=d.length;if(u&&(i=c,c=u,u=i,g-=i),c>0&&g>0){for(i=g%c||c,h=d.substr(0,i);i<g;i+=c)h+=l+d.substr(i,c);u>0&&(h+=l+d.slice(i)),f&&(h="-"+h)}r=p?h+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?p.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):p):h}return(n.prefix||"")+r+(n.suffix||"")},O.toFraction=function(t){var e,r,o,i,s,c,l,p,f,d,m,y,w=this,v=w.c;if(null!=t&&(!(l=new $(t)).isInteger()&&(l.c||1!==l.s)||l.lt(S)))throw Error(a+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+V(l));if(!v)return new $(w);for(e=new $(S),f=r=new $(S),o=p=new $(S),y=g(v),s=e.e=y.length-w.e-1,e.c[0]=h[(c=s%u)<0?u+c:c],t=!t||l.comparedTo(e)>0?s>0?e:f:l,c=j,j=1/0,l=new $(y),p.c[0]=0;d=n(l,e,0,1),1!=(i=r.plus(d.times(o))).comparedTo(t);)r=o,o=i,f=p.plus(d.times(i=f)),p=i,e=l.minus(d.times(i=e)),l=i;return i=n(t.minus(r),o,0,1),p=p.plus(i.times(f)),r=r.plus(i.times(o)),p.s=f.s=w.s,m=n(f,o,s*=2,M).minus(w).abs().comparedTo(n(p,r,s,M).minus(w).abs())<1?[f,o]:[p,r],j=c,m},O.toNumber=function(){return+V(this)},O.toPrecision=function(t,e){return null!=t&&y(t,1,f),G(this,t,e,2)},O.toString=function(t){var e,n=this,r=n.s,o=n.e;return null===o?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(null==t?e=o<=I||o>=R?v(g(n.c),o):b(g(n.c),o,"0"):10===t?e=b(g((n=J(new $(n),C+o+1,M)).c),n.e,"0"):(y(t,2,H.length,"Base"),e=_(b(g(n.c),o,"0"),10,t,r,!0)),r<0&&n.c[0]&&(e="-"+e)),e},O.valueOf=O.toJSON=function(){return V(this)},O._isBigNumber=!0,null!=e&&$.set(e),$}()).default=n.BigNumber=n,t.exports?t.exports=n:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=n)}(this)})).BigNumber;const I={ROUNDING_MODE:M.ROUND_DOWN};function R(t){return(new TextEncoder).encode(t)}function P(t){return"string"==typeof t?P(D(t)):(new TextDecoder).decode(t)}M.config(I);const j="INVALID_ARGUMENT";function U(t,e="UNKNOWN_ERROR",n={}){let r=[];Object.keys(n).forEach((t=>{try{r.push(t+"="+JSON.stringify(n[t]))}catch(e){r.push(t+"="+JSON.stringify(n[t].toString()))}}));let o=t;r.length&&(t+=" ("+r.join(", ")+")");let i=new Error(t);return i.reason=o,i.code=e,Object.keys(n).forEach((function(t){i[t]=n[t]})),i}function D(t){if("string"!=typeof t)throw new Error("hexToBytes only accept strings, got: "+typeof t);if("0x"===t.substr(0,2))return D(t.substr(2));const e=new Uint8Array(Math.ceil(t.length/2));let n=0;for(let r=0;r<t.length;r+=2){const o=parseInt(t.substr(r,2),16);if(isNaN(o))throw new Error("Cannot read hex string:"+JSON.stringify(t));e[n]=o,n++}return e}function L(t){return Array.from(t).map((t=>t.toString(16).padStart(2,"0"))).join("")}function q(t,e){if("string"==typeof t){if(e&&"hex"===e.encoding&&"string"==typeof t){let e=t;e.length>2&&"0x"===e.substr(0,2)&&(e=e.substr(2));const n=D(e);return C(n)}return C(R(t))}return C(t)}let H={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function $(t,e,n){return new Array(e-t.length+1).join(n||"0")+t}function G(t){return wt(t)&&t.name&&-1!==t.name.indexOf("(")?t.name:t.name+"("+W(!1,t.inputs||[]).join(",")+")"}function z(...t){const e=t.reduce(((t,e)=>t+e.length),0);var n=new Uint8Array(e);let r=0;for(let e of t)n.set(e,r),r+=e.length;return n}function W(t,e){const n=[];return e.forEach((function(e){if("object"==typeof e.components){if("tuple"!==e.type.substring(0,5))throw new Error("components found but type is not tuple; report on GitHub");var r="",o=e.type.indexOf("[");o>=0&&(r=e.type.substring(o));var i=W(t,e.components);bt(i)&&t?n.push("tuple("+i.join(",")+")"+r):t?n.push("("+i+")"):n.push("("+i.join(",")+")"+r)}else n.push(e.type)})),n}function J(t){let e=t.indexOf("("),n=t.indexOf(")");return-1!==e&&-1!==n?t.substr(0,e):t}function V(t){let e=t.indexOf("("),n=t.indexOf(")");return-1!==e&&-1!==n?t.substr(e+1,n-e-1).replace(" ",""):""}function Y(t){return null==t?t:ot(t).toNumber()}function K(t){return ot(t).toNumber()}function Z(t){return mt(t)?t.toString(10):""+t}function X(t){return"string"==typeof t&&!t.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(t)?"0x"+t:nt(t)}function Q(t){if("string"==typeof t)return t.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(t)?nt(t):"0x"+L(R(t));if(t instanceof Uint8Array)return"0x"+L(t);throw new Error(`toStringData: Error trying to convert ${t} (${typeof t}) to a hex string.`)}function tt(t){return"boolean"==typeof t?t:0!==ot(t).toNumber()}function et(t){let e=ot(t),n=e.toString(16);return e.isLessThan(0)?"-0x"+n.substr(1):"0x"+n}function nt(t){if(vt(t))return et(+t);if(mt(t))return et(t);if(yt(t)){const e=t;if(0===e.indexOf("-0x"))return et(e);if(0===e.indexOf("0x"))return e;if(!isFinite(e))return L(R(e))}if(t instanceof Uint8Array)return"0x"+L(t);if(bt(t)||wt(t))throw new Error("toHex can only be called with scalar values, not objects or arrays");return et(t)}function rt(t){let e=t?t.toLowerCase():"ether",n=H[e];if(void 0===n)throw new Error("This unit doesn't exists, please use the one of the following units"+JSON.stringify(H,null,2));return new M(n,10)}function ot(t){let e=t||0;return mt(e)?e:("string"==typeof e&&(e=e.trim()),"string"!=typeof e||0!==e.indexOf("0x")&&0!==e.indexOf("-0x")?e instanceof Uint8Array?new M(L(e),16):new M(e,10):new M(e.replace("0x","").toLowerCase(),16))}function it(t){return new M(new Array(t).fill("1").join(""),2)}function at(t,e=256){let n=ot(t).integerValue();return n.isLessThan(0)?it(e).plus(n).plus(1):n}function st(t,e){return"1"==$(t.toString(2),e,"0")[0]}function ct(t){if("string"!=typeof t)throw U("invalid address",j,{arg:"address",value:t});if(t.trim().match(/^(0x)?[0-9a-fA-F]{40}$/))return"0x"!==t.trim().substring(0,2)&&(t="0x"+t),ft(t);throw U("invalid address",j,{arg:"address",value:t})}function ut(t,e=256){if(st(t,e)){const n=it(e);return t.minus(n).minus(1)}return t}function lt(t){return/^0x[0-9a-f]{40}$/i.test(t)}function ht(t){return!!/^(0x)?[0-9a-f]{40}$/i.test(t)&&(!(!/^(0x)?[0-9a-f]{40}$/.test(t)&&!/^(0x)?[0-9A-F]{40}$/.test(t))||pt(t))}function pt(t){const e=t.replace("0x","");let n=q(e.toLowerCase());for(let t=0;t<40;t++)if(parseInt(n[t],16)>7&&e[t].toUpperCase()!==e[t]||parseInt(n[t],16)<=7&&e[t].toLowerCase()!==e[t])return!1;return!0}function ft(t){if(void 0===t)return"";const e=t.toLowerCase().replace("0x",""),n=q(e);let r="0x";for(let t=0;t<e.length;t++)parseInt(n[t],16)>7?r+=e[t].toUpperCase():r+=e[t];return r}function dt(t){if(!Array.isArray(t))throw new Error(`Value was not an array: ${JSON.stringify(t)}`);return t}function gt(t){return lt(t)?t:/^[0-9a-f]{40}$/.test(t)?"0x"+t:"0x"+$(nt(t).substr(2),40)}function mt(t){return t instanceof M}function yt(t){return"string"==typeof t||t&&t.constructor&&"String"===t.constructor.name}function wt(t){return null!==t&&!Array.isArray(t)&&"object"==typeof t}function vt(t){return"boolean"==typeof t}function bt(t){return Array.isArray(t)}var _t,Ft,Nt;function Tt(e,n){if(!e)throw new Error("jsonrpc method should be specified!");if("string"!=typeof e)throw new Error(`jsonrpc must be a string, got ${typeof e}!`);return t.messageId++,{jsonrpc:"2.0",id:t.messageId,method:e,params:n||[]}}function xt(t){return Array.isArray(t)?t.every(e):e(t);function e(t){return!(!t||"error"in t||"2.0"!==t.jsonrpc||"number"!=typeof t.id||null==t.result&&void 0===t.result)}}function At(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function kt(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function Et(t){return ot(t)}function Bt(t){return void 0===t?"latest":Ot(t)}function Ot(t){return void 0===t||null==t?null:function(t){return"latest"===t||"pending"===t||"earliest"===t}(t)?t:nt(t)}function St(t){return t.from=t.from,t.from&&(t.from=Ut(t.from)),t.to&&(t.to=Ut(t.to)),void 0!==t.gasPrice&&(t.gasPrice=et(t.gasPrice)),void 0!==t.gas&&(t.gas=et(t.gas)),void 0!==t.value&&(t.value=et(t.value)),void 0!==t.nonce&&(t.nonce=et(t.nonce)),t.data&&!t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(t.data)&&(t.data="0x"+t.data),t}function Ct(t){if("string"!=typeof t)throw new Error("The provided input for transactionId is not a string, got: "+JSON.stringify(t));if(0!==t.indexOf("0x"))throw new Error("TransactionID must start with 0x, got: "+JSON.stringify(t));if(66!==t.length)throw new Error("TransactionID must be a 32 byte hex, got: "+JSON.stringify(t));return t}function Mt(t){if("object"!=typeof t)throw new Error("Did not provide transaction options");if(!t.from)throw new Error('Missing "from" in transaction options');return t.from=Ut(t.from),t.to&&(t.to=Ut(t.to)),void 0!==t.gasPrice&&(t.gasPrice=et(t.gasPrice)),void 0!==t.gas&&(t.gas=et(t.gas)),void 0!==t.value&&(t.value=et(t.value)),void 0!==t.nonce&&(t.nonce=et(t.nonce)),t.data&&!t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(t.data)&&(t.data="0x"+t.data),t}function It(t){return t?(null!==t.blockNumber&&(t.blockNumber=K(t.blockNumber)),null!==t.transactionIndex&&(t.transactionIndex=K(t.transactionIndex)),t.nonce=K(t.nonce),t.gas=K(t.gas),t.gasPrice=ot(t.gasPrice),t.value=ot(t.value),t):null}function Rt(t){return t?(null!==t.blockNumber&&(t.blockNumber=K(t.blockNumber)),null!==t.transactionIndex&&(t.transactionIndex=K(t.transactionIndex)),t.cumulativeGasUsed=K(t.cumulativeGasUsed),t.gasUsed=K(t.gasUsed),t.logs&&bt(t.logs)&&(t.logs=t.logs.map((function(t){return jt(t)}))),t.status=K(t.status||""),t):null}function Pt(t){return t?(t.gasLimit=K(t.gasLimit),t.gasUsed=K(t.gasUsed),t.size=K(t.size),t.timestamp=K(t.timestamp),null!==t.number&&(t.number=K(t.number)),t.difficulty=ot(t.difficulty),t.totalDifficulty=ot(t.totalDifficulty),bt(t.transactions)&&t.transactions.forEach((function(e,n){yt(e)||(t.transactions[n]=It(e)||t.transactions[n])})),t):null}function jt(t){return t?(t.blockNumber&&(t.blockNumber=K(t.blockNumber)),t.transactionIndex&&(t.transactionIndex=K(t.transactionIndex)),t.logIndex&&(t.logIndex=K(t.logIndex)),t):t}function Ut(t){if(lt(t))return t;if(ht(t))return"0x"+t;throw new Error(`Invalid address: ${JSON.stringify(t)}`)}function Dt(t){return t}function Lt(t){return t?(t.startingBlock=K(t.startingBlock),t.currentBlock=K(t.currentBlock),t.highestBlock=K(t.highestBlock),t.knownStates&&(t.knownStates=K(t.knownStates),t.pulledStates=K(t.pulledStates)),t):t}t.TransactionStatus=void 0,(_t=t.TransactionStatus||(t.TransactionStatus={})).pending="pending",_t.confirmed="confirmed",_t.failed="failed",t.TransactionType=void 0,(Ft=t.TransactionType||(t.TransactionType={})).queued="queued",Ft.dropped="dropped",Ft.replaced="replaced",Ft.pending="pending",Ft.reverted="reverted",Ft.confirmed="confirmed",t.messageId=0;class qt{constructor(t){this.callName=t.callName,this.params=t.params||0,this.inputFormatter=t.inputFormatter||null,this.outputFormatter=t.outputFormatter}validateArgs(t){if(t.length!==this.params)throw e=this.callName,n=t.length,r=this.params,new Error(`Invalid number of input parameters to RPC method "${e}" given: ${n}, expected: ${r}`);var e,n,r}formatInput(t){return this.inputFormatter?this.inputFormatter.map((function(e,n){return e?e(t[n]):t[n]})):t}formatOutput(t){return null!==t?this.outputFormatter(t):null}toPayload(t){let e=this.formatInput(t);return this.validateArgs(e),{method:this.callName,params:e}}async execute(t,...e){let n=this.toPayload(e);if(!t)throw new Error("Missing RequestManager in method#exec");const r=await t.sendAsync(n);return this.formatOutput(r)}}class Ht{constructor(t){this.getter=t.getter,this.outputFormatter=t.outputFormatter}formatOutput(t){return this.outputFormatter(t)}async execute(t,...e){const n=await t.sendAsync({method:this.getter,params:[]});return this.formatOutput(n)}}function $t(t){return new Promise((e=>setTimeout(e,t)))}function Gt(e,n){const r=t.eth[n];if(!r)throw new Error(`Could not find the method/property named ${n.toString()}`);Object.defineProperty(e,n,{value:function(){return r.execute(this,...arguments)}})}t.eth=void 0,(Nt=t.eth||(t.eth={})).eth_getBalance=new qt({callName:"eth_getBalance",params:2,inputFormatter:[Ut,Bt],outputFormatter:Et}),Nt.eth_getStorageAt=new qt({callName:"eth_getStorageAt",params:3,inputFormatter:[Ut,nt,Bt],outputFormatter:X}),Nt.eth_getCode=new qt({callName:"eth_getCode",params:2,inputFormatter:[Ut,Bt],outputFormatter:X}),Nt.eth_getBlockByHash=new qt({callName:"eth_getBlockByHash",params:2,inputFormatter:[Ot,function(t){return!!t}],outputFormatter:Pt}),Nt.eth_getBlockByNumber=new qt({callName:"eth_getBlockByNumber",params:2,inputFormatter:[Ot,function(t){return!!t}],outputFormatter:Pt}),Nt.eth_getUncleByBlockHashAndIndex=new qt({callName:"eth_getUncleByBlockHashAndIndex",params:2,inputFormatter:[Ot,nt],outputFormatter:Pt}),Nt.eth_getUncleByBlockNumberAndIndex=new qt({callName:"eth_getUncleByBlockNumberAndIndex",params:2,inputFormatter:[Ot,nt],outputFormatter:Pt}),Nt.eth_getBlockTransactionCountByHash=new qt({callName:"eth_getBlockTransactionCountByHash",params:1,inputFormatter:[Ot],outputFormatter:K}),Nt.eth_getBlockTransactionCountByNumber=new qt({callName:"eth_getBlockTransactionCountByNumber",params:1,inputFormatter:[Ot],outputFormatter:K}),Nt.eth_getUncleCountByBlockHash=new qt({callName:"eth_getUncleCountByBlockHash",params:1,inputFormatter:[Ot],outputFormatter:K}),Nt.eth_getUncleCountByBlockNumber=new qt({callName:"eth_getUncleCountByBlockNumber",params:1,inputFormatter:[Ot],outputFormatter:K}),Nt.eth_getTransactionByHash=new qt({callName:"eth_getTransactionByHash",params:1,inputFormatter:[Ct],outputFormatter:It}),Nt.eth_getTransactionByBlockHashAndIndex=new qt({callName:"eth_getTransactionByBlockHashAndIndex",params:2,inputFormatter:[Ot,nt],outputFormatter:It}),Nt.eth_getTransactionByBlockNumberAndIndex=new qt({callName:"eth_getTransactionByBlockNumberAndIndex",params:2,inputFormatter:[Ot,nt],outputFormatter:It}),Nt.eth_getTransactionReceipt=new qt({callName:"eth_getTransactionReceipt",params:1,inputFormatter:[Ct],outputFormatter:Rt}),Nt.eth_getTransactionCount=new qt({callName:"eth_getTransactionCount",params:2,inputFormatter:[Ut,Bt],outputFormatter:K}),Nt.eth_sendRawTransaction=new qt({callName:"eth_sendRawTransaction",params:1,inputFormatter:[null],outputFormatter:X}),Nt.web3_sha3=new qt({callName:"web3_sha3",params:1,inputFormatter:[null],outputFormatter:X}),Nt.eth_sendTransaction=new qt({callName:"eth_sendTransaction",params:1,inputFormatter:[Mt],outputFormatter:X}),Nt.eth_sign=new qt({callName:"eth_sign",params:2,inputFormatter:[Ut,null],outputFormatter:X}),Nt.eth_call=new qt({callName:"eth_call",params:2,inputFormatter:[St,Bt],outputFormatter:X}),Nt.eth_estimateGas=new qt({callName:"eth_estimateGas",params:1,inputFormatter:[St],outputFormatter:K}),Nt.eth_submitWork=new qt({callName:"eth_submitWork",params:3,inputFormatter:[null,null,null],outputFormatter:tt}),Nt.eth_getWork=new qt({callName:"eth_getWork",params:0,inputFormatter:[],outputFormatter:dt}),Nt.eth_coinbase=new Ht({getter:"eth_coinbase",outputFormatter:gt}),Nt.eth_mining=new Ht({getter:"eth_mining",outputFormatter:tt}),Nt.eth_hashrate=new Ht({getter:"eth_hashrate",outputFormatter:K}),Nt.eth_syncing=new Ht({getter:"eth_syncing",outputFormatter:Lt}),Nt.eth_gasPrice=new Ht({getter:"eth_gasPrice",outputFormatter:Et}),Nt.eth_accounts=new Ht({getter:"eth_accounts",outputFormatter:dt}),Nt.eth_blockNumber=new Ht({getter:"eth_blockNumber",outputFormatter:K}),Nt.eth_protocolVersion=new Ht({getter:"eth_protocolVersion",outputFormatter:K}),Nt.web3_clientVersion=new Ht({getter:"web3_clientVersion",outputFormatter:Z}),Nt.net_version=new Ht({getter:"net_version",outputFormatter:Z}),Nt.shh_version=new qt({callName:"shh_version",params:0,inputFormatter:[],outputFormatter:K}),Nt.shh_post=new qt({callName:"shh_post",params:1,inputFormatter:[null],outputFormatter:tt}),Nt.personal_newAccount=new qt({callName:"personal_newAccount",params:1,inputFormatter:[null],outputFormatter:gt}),Nt.personal_importRawKey=new qt({callName:"personal_importRawKey",params:2,inputFormatter:[null,null],outputFormatter:gt}),Nt.personal_sign=new qt({callName:"personal_sign",params:3,inputFormatter:[Q,Ut,null],outputFormatter:X}),Nt.personal_ecRecover=new qt({callName:"personal_ecRecover",params:2,inputFormatter:[Q,null],outputFormatter:gt}),Nt.personal_unlockAccount=new qt({callName:"personal_unlockAccount",params:3,inputFormatter:[Ut,null,Y],outputFormatter:tt}),Nt.personal_sendTransaction=new qt({callName:"personal_sendTransaction",params:2,inputFormatter:[Mt,null],outputFormatter:X}),Nt.personal_lockAccount=new qt({callName:"personal_lockAccount",params:1,inputFormatter:[Ut],outputFormatter:tt}),Nt.personal_listAccounts=new Ht({getter:"personal_listAccounts",outputFormatter:dt}),Nt.net_listening=new Ht({getter:"net_listening",outputFormatter:tt}),Nt.net_peerCount=new Ht({getter:"net_peerCount",outputFormatter:K}),Nt.eth_newFilter=new qt({callName:"eth_newFilter",params:1,inputFormatter:[Dt],outputFormatter:nt}),Nt.eth_getLogs=new qt({callName:"eth_getLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),Nt.eth_newBlockFilter=new qt({callName:"eth_newBlockFilter",params:0,inputFormatter:[],outputFormatter:nt}),Nt.eth_newPendingTransactionFilter=new qt({callName:"eth_newPendingTransactionFilter",params:0,inputFormatter:[],outputFormatter:nt}),Nt.eth_uninstallFilter=new qt({callName:"eth_uninstallFilter",params:1,inputFormatter:[nt],outputFormatter:tt}),Nt.eth_getFilterLogs=new qt({callName:"eth_getFilterLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),Nt.eth_getFilterChanges=new qt({callName:"eth_getFilterChanges",params:1,inputFormatter:[nt],outputFormatter:dt}),Nt.eth_submitHashrate=new qt({callName:"eth_submitHashrate",params:2,inputFormatter:[null,null],outputFormatter:tt}),Nt.shh_newIdentity=new qt({callName:"shh_newIdentity",params:0,inputFormatter:[],outputFormatter:X}),Nt.shh_hasIdentity=new qt({callName:"shh_hasIdentity",params:1,inputFormatter:[null],outputFormatter:tt}),Nt.shh_newGroup=new qt({callName:"shh_newGroup",params:0,inputFormatter:[],outputFormatter:X}),Nt.shh_addToGroup=new qt({callName:"shh_addToGroup",params:1,inputFormatter:[null],outputFormatter:tt}),Nt.shh_newFilter=new qt({callName:"shh_newFilter",params:1,inputFormatter:[null],outputFormatter:nt}),Nt.shh_uninstallFilter=new qt({callName:"shh_uninstallFilter",params:1,inputFormatter:[null],outputFormatter:tt}),Nt.shh_getLogs=new qt({callName:"shh_getLogs",params:1,inputFormatter:[null],outputFormatter:dt}),Nt.shh_getFilterMessages=new qt({callName:"shh_getFilterMessages",params:1,inputFormatter:[null],outputFormatter:dt}),Nt.shh_getFilterChanges=new qt({callName:"shh_getFilterChanges",params:1,inputFormatter:[null],outputFormatter:dt}),Nt.shh_getMessages=new qt({callName:"shh_getMessages",params:1,inputFormatter:[null],outputFormatter:dt});class zt{constructor(t){this.provider=t,this.requests=new Map}async sendAsync(t){const e=await this.provider;if(!e)throw new Error("Provider not set or invalid");let n=Tt(t.method,t.params);const r=i();return this.requests.set(n.id,r),e.sendAsync(n,((t,e)=>{this.requests.delete(n.id),t?r.reject(t):xt(e)?r.resolve(e.result):r.reject(function(t){let e=t&&t.error&&t.error.message?t.error.message:"Invalid JSON RPC response: "+JSON.stringify(t);return new Error(e)}(e))})),r}setProvider(t){this.provider=t}async getConfirmedTransaction(t){const e=await this.waitForCompletion(t);if(this.isFailure(e))throw new Error(`Transaction "${t}" failed`);return e}async waitForCompletion(e,n){const r=Ct(e);if(await this.isTxDropped(r,n)){const e=await this.getTransactionAndReceipt(r);return Object.assign(Object.assign({},e),{status:t.TransactionStatus.failed})}for(;;){const e=await this.getTransactionAndReceipt(r);if(!this.isPending(e)&&e.receipt)return Object.assign(Object.assign({},e),{status:this.isFailure(e)?t.TransactionStatus.failed:t.TransactionStatus.confirmed});await $t(2e3)}}async getTransaction(e){let n,r=null;const o=Ct(e);try{const t=(await this.eth_accounts())[0];t&&(r=await this.eth_getTransactionCount(t,"latest"))}catch(t){r=null}try{if(n=await this.eth_getTransactionByHash(o),null==n)return null}catch(t){return null}if(null==n.blockNumber){if(null!=r){if(n.nonce<r)return{hash:o,type:t.TransactionType.replaced,nonce:n.nonce};if(n.nonce>r)return{hash:o,type:t.TransactionType.queued,nonce:n.nonce}}return Object.assign({type:t.TransactionType.pending},n)}let i;try{if(i=await this.eth_getTransactionReceipt(o),null==i||0===i.status)return Object.assign({type:t.TransactionType.reverted},n)}catch(t){return null}return Object.assign(Object.assign({type:t.TransactionType.confirmed},n),{receipt:i})}async isTxDropped(t,e=15){let n=e;for(;n>0;){if(null!==await this.getTransactionAndReceipt(t))return!1;n-=1,await $t(2e3)}return!0}async getTransactionAndReceipt(t){t=Ct(t);const[e,n]=await Promise.all([this.eth_getTransactionByHash(t),this.eth_getTransactionReceipt(t)]);return Object.assign(Object.assign({},e),{receipt:n})}isPending(t){return t&&null===t.blockNumber}isFailure(t){return t&&(!t.receipt||0===t.receipt.status)}}function Wt(t){return"slice"in t&&t.slice||(t.slice=function(){var e=Array.prototype.slice.call(arguments);return new Uint8Array(Array.prototype.slice.apply(t,e))}),t}function Jt(t){if(null==t)throw U("cannot convert null value to array",j,{arg:"value",value:t});if(t instanceof Uint8Array)return Wt(new Uint8Array(t));if("string"==typeof t){let r=t.match(/^(0x)?[0-9a-fA-F]*$/);if(!r)throw U("invalid hexidecimal string",j,{arg:"value",value:t});if("0x"!==r[1])throw U("hex string must have 0x prefix",j,{arg:"value",value:t});(t=t.substring(2)).length%2&&(t="0"+t);for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return Wt(new Uint8Array(e))}if(function(t){if(!t||parseInt(String(t.length))!=t.length||"string"==typeof t)return!1;for(var e=0;e<t.length;e++){var n=t[e];if(n<0||n>=256||parseInt(String(n))!=n)return!1}return!0}(t))return Wt(new Uint8Array(t));throw U("invalid arrayify value",void 0,{arg:"value",value:t,type:typeof t})}function Vt(t,e,n){Object.defineProperty(t,e,{enumerable:!0,value:n,writable:!1})}At([Gt,kt("design:type",Function)],zt.prototype,"web3_clientVersion",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"web3_sha3",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"net_version",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"net_peerCount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"net_listening",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_protocolVersion",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_syncing",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_coinbase",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_mining",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_hashrate",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_gasPrice",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_accounts",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_blockNumber",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBalance",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getStorageAt",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionCount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByHash",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByNumber",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockHash",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockNumber",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getCode",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_sign",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_sendTransaction",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_sendRawTransaction",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_call",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_estimateGas",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBlockByHash",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBlockByNumber",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionByHash",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockHashAndIndex",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockNumberAndIndex",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionReceipt",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getUncleByBlockHashAndIndex",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getUncleByBlockNumberAndIndex",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_newFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_newBlockFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_newPendingTransactionFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_uninstallFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getFilterChanges",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getFilterLogs",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getLogs",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getWork",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_submitWork",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_submitHashrate",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_post",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_version",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_newIdentity",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_hasIdentity",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_newGroup",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_addToGroup",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_newFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_uninstallFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_getFilterChanges",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_getMessages",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_unlockAccount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_newAccount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_listAccounts",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_lockAccount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_importRawKey",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_sendTransaction",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_sign",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_ecRecover",void 0);const Yt=new M(-1),Kt=new M(0),Zt=new M(1),Xt=new M("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Qt(t){return function(t,e){function n(e){return new Error('unexpected character "'+t[e]+'" at position '+e+' in "'+t+'"')}for(var r={type:"",name:"",state:{allowType:!0}},o=r,i=0;i<t.length;i++){var a=t[i];switch(a){case"(":if(!o.state.allowParams)throw n(i);o.state.allowType=!1,o.type=te(o.type),o.components=[{type:"",name:"",parent:o,state:{allowType:!0}}],o=o.components[0];break;case")":delete o.state,e&&"indexed"===o.name&&(o.indexed=!0,o.name=""),o.type=te(o.type);var s=o;if(!(o=o.parent))throw n(i);delete s.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,e&&"indexed"===o.name&&(o.indexed=!0,o.name=""),o.type=te(o.type);var c={type:"",name:"",parent:o.parent,state:{allowType:!0}};o.parent.components.push(c),delete o.parent,o=c;break;case" ":o.state.allowType&&""!==o.type&&(o.type=te(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&(e&&"indexed"===o.name?(o.indexed=!0,o.name=""):o.state.allowName=!1);break;case"[":if(!o.state.allowArray)throw n(i);o.type+=a,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":if(!o.state.readArray)throw n(i);o.type+=a,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:if(o.state.allowType)o.type+=a,o.state.allowParams=!0,o.state.allowArray=!0;else if(o.state.allowName)o.name+=a,delete o.state.allowArray;else{if(!o.state.readArray)throw n(i);o.type+=a}}}if(o.parent)throw new Error("unexpected eof");return delete r.state,e&&"indexed"===o.name&&(o.indexed=!0,o.name=""),r.type=te(r.type),r}(t,!0)}function te(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const ee=new RegExp(/^bytes([0-9]*)$/),ne=new RegExp(/^(u?int)([0-9]*)$/),re=new RegExp(/^(.*)\[([0-9]*)\]$/),oe=function(t,e){var n=t.match(ne);return n&&parseInt(n[2])<=48?e.toNumber():e};class ie{constructor(t,e,n,r="",o){this.coerceFunc=t,this.name=e,this.type=n,this.localName=r,this.dynamic=o}}class ae extends ie{constructor(t){super(t.coerceFunc,t.name,t.type,void 0,t.dynamic),Vt(this,"coder",t)}encode(t){return this.coder.encode(t)}decode(t,e){return this.coder.decode(t,e)}}class se extends ie{constructor(t,e){super(t,"null","",e,!1)}encode(t){return Jt([])}decode(t,e){if(e>t.length)throw new Error("invalid null");return{consumed:0,value:this.coerceFunc("null",void 0)}}}function ce(t,e){return new M(t.toString(2).substr(-e),2)}class ue extends ie{constructor(t,e,n,r){const o=(n?"int":"uint")+8*e;super(t,o,o,r,!1),this.size=e,this.signed=n}encode(t){try{let e=ot(t);if(this.signed){let t=ce(Xt,8*this.size-1);if(e.gt(t))throw new Error("out-of-bounds");if(t=t.plus(Zt).multipliedBy(Yt),e.lt(t))throw new Error("out-of-bounds")}else if(e.lt(Kt)||e.gt(ce(Xt,8*this.size)))throw new Error("out-of-bounds");e=ce(at(e,8*this.size),8*this.size),this.signed&&(e=at(ut(e,8*this.size),256));let n=$(at(e).toString(16),64);if(-1!=n.indexOf("NaN"))throw U("invalid number value, NaN",j,{arg:this.localName,coderType:this.name,value:t,v:e,twosComplement:at(e),twosComplement16:at(e).toString(16),pad:$(at(e).toString(16),64),size:this.size});return D(n)}catch(e){throw U("invalid number value",j,{arg:this.localName,coderType:this.name,value:t,message:e.toString()})}}decode(t,e){if(t.length<e+32)throw U("insufficient data for "+this.name+" type",j,{arg:this.localName,coderType:this.name,value:nt(t.slice(e,e+32))});var n=32-this.size,r=new M(L(t.slice(e+n,e+32)),16);return r=this.signed?ut(r,8*this.size):ce(r,8*this.size),{consumed:32,value:this.coerceFunc(this.name,r)}}}var le=new ue((function(t,e){return e}),32,!1,"none");class he extends ie{constructor(t,e,n){const r="bytes"+e;super(t,r,r,n,!1),this.length=e}encode(t){var e=new Uint8Array(32);try{if("string"==typeof t&&t.length%2!=0)throw new Error("hex string cannot be odd-length");let n=Jt(t);if(n.length>this.length)throw new Error("incorrect data length");e.set(n)}catch(e){throw U("invalid "+this.name+" value. Use hex strings or Uint8Array",j,{arg:this.localName,coderType:this.name,value:e.value||t,details:e.message})}return e}decode(t,e){if(t.length<e+32)throw U("insufficient data for "+this.name+" type",j,{arg:this.localName,coderType:this.name,value:nt(t.slice(e,e+32))});return{consumed:32,value:this.coerceFunc(this.name,t.slice(e,e+this.length))}}}function pe(t){var e=32*Math.ceil(t.length/32),n=new Uint8Array(e-t.length);return z(le.encode(t.length),t,n)}function fe(t,e,n){if(t.length<e+32)throw U("insufficient data for dynamicBytes length",j,{arg:n,coderType:"dynamicBytes",value:nt(t.slice(e,e+32))});var r=le.decode(t,e).value;try{r=r.toNumber()}catch(t){throw t("dynamic bytes count too large",j,{arg:n,coderType:"dynamicBytes",value:r.toString()})}if(t.length<e+32+r)throw U("insufficient data for dynamicBytes type",j,{arg:n,coderType:"dynamicBytes",value:nt(t.slice(e,e+32+r))});return{consumed:32+32*Math.ceil(r/32),value:t.slice(e+32,e+32+r)}}function de(t){return 32*Math.ceil(t/32)}function ge(t,e){if(Array.isArray(e));else{if(!e||"object"!=typeof e)throw U("invalid tuple value",j,{coderType:"tuple",value:e});var n=[];t.forEach((function(t){n.push(e[t.localName])})),e=n}if(t.length!==e.length)throw U("types/value length mismatch",j,{coderType:"tuple",value:e});var r=[];t.forEach((function(t,n){r.push({dynamic:t.dynamic,value:t.encode(e[n])})}));var o=0,i=0;r.forEach((function(t){t.dynamic?(o+=32,i+=de(t.value.length)):o+=de(t.value.length)}));var a=0,s=o,c=new Uint8Array(o+i);return r.forEach((function(t){t.dynamic?(c.set(le.encode(s),a),a+=32,c.set(t.value,s),s+=de(t.value.length)):(c.set(t.value,a),a+=de(t.value.length))})),c}class me extends Array{}class ye extends ie{constructor(t,e,n,r){super(t,"array",e.type+"["+(n>=0?n:"")+"]",r,-1===n||e.dynamic),this.coder=e,this.length=n}encode(t){if(!Array.isArray(t))throw U("expected array value",j,{arg:this.localName,coderType:"array",value:t});var e=this.length,n=new Uint8Array(0);-1===e&&(e=t.length,n=le.encode(e)),function(t,e,n){if(n||(n=""),t<e)throw U("missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e});if(t>e)throw U("too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}(e,t.length,"in coder array"+(this.localName?" "+this.localName:""));for(var r=[],o=0;o<t.length;o++)r.push(this.coder);return z(n,ge(r,t))}decode(t,e){var n=0,r=this.length;if(-1===r){try{var o=le.decode(t,e)}catch(t){throw t("insufficient data for dynamic array length",j,{arg:this.localName,coderType:"array",value:t.value})}try{r=o.value.toNumber()}catch(t){throw t("array count too large",j,{arg:this.localName,coderType:"array",value:o.value.toString()})}n+=o.consumed,e+=o.consumed}for(var i=[],a=0;a<r;a++)i.push(new ae(this.coder));var s=function(t,e,n){var r=n,o=0,i=[];return t.forEach((function(t){if(t.dynamic){var a=le.decode(e,n);(s=t.decode(e,r+a.value.toNumber())).consumed=a.consumed}else var s=t.decode(e,n);null!=s.value&&i.push(s.value),n+=s.consumed,o+=s.consumed})),{value:i,consumed:o}}(i,t,e);return s.consumed+=n,s.value=this.coerceFunc(this.type,s.value),s}}class we extends ie{constructor(t,e,n){var r=!1,o=[];e.forEach((function(t){t.dynamic&&(r=!0),o.push(t.type)})),super(t,"tuple","tuple("+o.join(",")+")",n,r),this.coders=e}encode(t){return ge(this.coders,t)}decode(t,e){var n=function(t,e,n){var r=n,o=0,i=new me;return t.forEach((function(t){if(t.dynamic){var a=le.decode(e,n);(s=t.decode(e,r+a.value.toNumber())).consumed=a.consumed}else var s=t.decode(e,n);null!=s.value&&i.push(s.value),n+=s.consumed,o+=s.consumed})),t.forEach((function(t,e){let n=t.localName;n&&("length"===n&&(n="_length"),null==i[n]&&(i[n]=i[e]))})),{value:i,consumed:o}}(this.coders,t,e);return n.value=this.coerceFunc(this.type,n.value),n}}const ve={address:class extends ie{constructor(t,e){super(t,"address","address",e,!1)}encode(t){let e=new Uint8Array(32);const n=t.trim();if(!ht(n))throw U("invalid address format",j,{arg:this.localName,coderType:"address",value:t});try{e.set(D(Ut(n)),12)}catch(e){throw U(`invalid address (${e.message})`,j,{arg:this.localName,coderType:"address",value:t})}return e}decode(t,e){if(t.length<e+32)throw U("insufficuent data for address type",j,{arg:this.localName,coderType:"address",value:nt(t.slice(e,e+32)),missingBytes:e+32-t.length});return{consumed:32,value:this.coerceFunc("address",ct(nt(t.slice(e+12,e+32))))}}},bool:class extends ie{constructor(t,e){super(t,"bool","bool",e,!1)}encode(t){return le.encode(t?1:0)}decode(t,e){try{var n=le.decode(t,e)}catch(t){if("insufficient data for uint256 type"===t.reason)throw U("insufficient data for boolean type",j,{arg:this.localName,coderType:"boolean",value:t.value});throw t}return{consumed:n.consumed,value:this.coerceFunc("bool",!n.value.isZero())}}},string:class extends ie{constructor(t,e){super(t,"string","string",e,!0)}encode(t){if("string"!=typeof t)throw U("invalid string value",j,{arg:this.localName,coderType:"string",value:t});return pe(R(t))}decode(t,e){var n=fe(t,e,this.localName);return n.value=this.coerceFunc("string",P(n.value)),n}},bytes:class extends ie{constructor(t,e){super(t,"bytes","bytes",e,!0)}encode(t){try{return pe(Jt(t))}catch(t){throw t("invalid bytes value",j,{arg:this.localName,coderType:"bytes",value:t.value})}}decode(t,e){var n=fe(t,e,this.localName);return n.value=this.coerceFunc("bytes",n.value),n}},function:class extends he{constructor(t,e){super(t,24,e)}}};function be(t,e){var n,r=ve[e.type];if(r)return new r(t,e.name);if(n=e.type.match(ne)){let r=parseInt(n[2]||"256");if(0===r||r>256||r%8!=0)throw U("invalid "+n[1]+" bit length",j,{arg:"param",value:e});return new ue(t,r/8,"int"===n[1],e.name)}if(n=e.type.match(ee)){let r=parseInt(n[1]);if(0===r||r>32)throw U("invalid bytes length",j,{arg:"param",value:e});return new he(t,r,e.name)}if(n=e.type.match(re)){const r=Object.assign({},e);let o=parseInt(n[2]||"-1");return r.type=n[1],new ye(t,be(t,r),o,e.name)}if("tuple"===e.type.substring(0,5))return function(t,e,n){e||(e=[]);var r=e.map((e=>be(t,e)));return new we(t,r,n)}(t,e.components,e.name);if(""===e.type)return new se(t,e.name);throw U("invalid type",j,{arg:"type",value:e.type,fullType:e})}class _e{constructor(t){!function(t,e){if(!(t instanceof e))throw U("missing new","MISSING_NEW",{name:e.name})}(this,_e),t||(t=oe),Vt(this,"coerceFunc",t)}encode(t,e){if(t.length!==e.length)throw U("types/values length mismatch",j,{count:{types:t.length,values:e.length},value:{types:t,values:e}});const n=t.map((t=>"string"==typeof t?Qt(t):t)).map((t=>be(this.coerceFunc,t)));return new we(this.coerceFunc,n,"_").encode(e)}decode(t,e){const n=t.map((t=>"string"==typeof t?Qt(t):t)).map((t=>be(this.coerceFunc,t)));return new we(this.coerceFunc,n,"_").decode(e,0).value}}const Fe=new _e;var Ne;!function(t){t.encodeParams=function(t,e){return L(Fe.encode(t,e))},t.decodeParams=function(t,e){if(t.length>0&&(!e||"0x"===e||"0X"===e))throw new Error("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return Fe.decode(t,D("0x"+e.replace(/0x/i,"")))}}(Ne||(Ne={}));class Te{constructor(t){this.json=t,this._inputTypes=t.inputs||[],this._outputTypes=t.outputs||[],this._constant=!!t.constant,this._payable=!!t.payable||"payable"===t.stateMutability,this.needsToBeTransaction=this._payable||"constant"in t&&!t.constant||"nonpayable"===t.stateMutability,this._name=G(t)}extractDefaultBlock(t){return t.length>this._inputTypes.length&&!wt(t[t.length-1])&&Bt(t.pop())||"latest"}validateArgs(t){if(t.some((t=>void 0===t)))throw new Error("Invalid call, some arguments are undefined");let e=t.filter((function(t){return!(!0===wt(t)&&!1===bt(t)&&!1===mt(t)&&!(t instanceof Uint8Array))}));if(e.length!==this._inputTypes.length)throw n=e.length,r=this._inputTypes.length,new Error(`Invalid number of arguments to Solidity function. given: ${n}, expected: ${r}`);var n,r}toPayload(t){let e={to:void 0,data:void 0,value:void 0,from:void 0};t.length>this._inputTypes.length&&wt(t[t.length-1])&&(e=t.pop()),this.validateArgs(t);const n=this.signature();let r=Ne.encodeParams(this._inputTypes,t);return 0==r.indexOf("0x")&&(r=r.substr(2)),e.data="0x"+n+r,e}signature(){return q(this._name).slice(0,8)}unpackOutput(t){if(!t)return;const e=t.length>=2?t.slice(2):t;let n=Ne.decodeParams(this._outputTypes,e);return 1===n.length?n[0]:n}async execute(t,e,...n){if(!t)throw new Error(`Cannot call function ${this.displayName()} because there is no requestManager`);if(this.needsToBeTransaction){const r=this.toPayload(n);if(r.to=e,r.value>0&&!this._payable)throw new Error("Cannot send value to non-payable function");if(!r.from)throw new Error('Missing "from" in transaction options');return await t.eth_sendTransaction(r)}{const r=this.extractDefaultBlock(n),o=this.toPayload(n);o.to=e;const i=await t.eth_call(o,r);return this.unpackOutput(i)}}estimateGas(t,e,...n){if(!(t instanceof zt))throw new Error("estimateGas needs to receive a RequestManager as first argument");let r=this.toPayload(n);return r.to=e,t.eth_estimateGas(r)}displayName(){return J(this._name)}typeName(){return V(this._name)||"void"}attachToContract(t){let e=this.displayName();const n=Object.assign(((...e)=>this.execute(t.requestManager,t.address,...e)),{estimateGas:this.estimateGas.bind(this,t.requestManager,t.address),toPayload:(...t)=>this.toPayload(t)});t[e]||(t[e]=n),t[e][this.typeName()]=n}}function xe(t){if(null==t)return null;const e=String(t).toString();return 0===e.indexOf("0x")?e:L(R(e))}class Ae{constructor(t){this.requestManager=t,this.isStarted=!1,this.isDisposed=!1,this.formatter=t=>t,this.filterId=i(),this.callbacks=[],this.stopSemaphore=i()}async watch(t){if(this.isDisposed)throw new Error("The filter was disposed");t&&(this.callbacks.push(t),this.isStarted||await this.start())}async start(){if(this.isDisposed)throw new Error("The filter was disposed");if(!this.isStarted){this.isStarted=!0;try{const t=await this.getNewFilter();if(!t)throw new Error("Could not create a filter, response: "+JSON.stringify(t));this.filterId.resolve(t)}catch(t){throw t}this.stopSemaphore=i(),await this.poll()}}async stop(){if(!this.isStarted)return;if(this.isDisposed)return;this.isDisposed=!0;const t=await this.filterId;if(this.isStarted=!1,this.stopSemaphore&&await this.stopSemaphore,!0!==await this.uninstall())throw new Error(`Couldn't stop the eth filter: ${t}`)}async poll(){if(this.isStarted){if(this.callbacks.length){const t=await this.getChanges();this.callbacks.forEach((e=>{this.formatter?t.forEach((t=>{e(this.formatter(t))})):t.forEach((t=>e(t)))}))}this.stopSemaphore.resolve(1),this.isStarted&&(this.stopSemaphore=i(),setTimeout((t=()=>this.poll(),function(){t().catch((t=>console.error(t)))}),500))}else this.stopSemaphore.resolve(1);var t}}class ke extends Ae{constructor(t,e,n=(t=>t)){super(t),this.requestManager=t,this.options=e,this.formatter=n,this.options=this.options||{},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(t){return xe(t)})),this.options={topics:this.options.topics,address:this.options.address?this.options.address:void 0,fromBlock:"number"==typeof this.options.fromBlock||"string"==typeof this.options.fromBlock?Ot(this.options.fromBlock)||void 0:"latest",toBlock:"number"==typeof this.options.toBlock||"string"==typeof this.options.toBlock?Ot(this.options.toBlock)||void 0:"latest"}}async getLogs(){this.isStarted||await this.start();const t=await this.filterId;return this.requestManager.eth_getFilterLogs(t)}async getNewFilter(){return this.requestManager.eth_newFilter(this.options)}async getChanges(){const t=await this.filterId;return this.requestManager.eth_getFilterChanges(t)}async uninstall(){const t=await this.filterId;return this.requestManager.eth_uninstallFilter(t)}}class Ee{constructor(t,e,n){this.requestManager=t,this.address=n,this._anonymous=!1,this._params=e.inputs||[],this._name=G(e),this._anonymous=e.anonymous||!1}types(t){return this._params.filter((function(e){return e.indexed===t}))}displayName(){return J(this._name)}typeName(){return V(this._name)||"void"}signature(){return q(this._name)}encode(t={},e={}){let n={topics:[],address:this.address};void 0!==e.fromBlock&&(n.fromBlock=Ot(e.fromBlock)||void 0),void 0!==e.toBlock&&(n.toBlock=Ot(e.toBlock)||void 0),n.topics=n.topics||[],this._anonymous||n.topics.push("0x"+this.signature());let r=this._params.filter((function(t){return!0===t.indexed})).map((function(e){let n=t[e.name];return null==n?null:bt(n)?n.map((function(t){return"0x"+Ne.encodeParams([e],[t])})):"0x"+Ne.encodeParams([e],[n])}));return n.topics=n.topics.concat(r),n}decode(t){t.data=t.data||"",t.topics=t.topics||[];let e=(this._anonymous?t.topics:t.topics.slice(1)).map((function(t){return t.slice(2)})).join(""),n=Ne.decodeParams(this.types(!0),e),r=t.data.slice(2),o=Ne.decodeParams(this.types(!1),r);const i=this._params.reduce((function(t,e){return t[e.name]=e.indexed?n.shift():o.shift(),t}),{});return Object.assign(Object.assign({},jt(t)),{event:this.displayName(),address:t.address,args:i})}async execute(t,e){let n=this.encode(t,e),r=this.decode.bind(this);return new ke(this.requestManager,n,r)}attachToContract(t){let e=this.execute.bind(this),n=this.displayName();t.events[n]||(t.events[n]=e),t.events[n][this.typeName()]=this.execute.bind(this,t)}}class Be{constructor(t,e,n){this._requestManager=t,this._json=e,this._address=n}encode(t={}){let e={address:this._address};return void 0!==t.fromBlock&&(e.fromBlock=Ot(t.fromBlock)||void 0),void 0!==t.toBlock&&(e.toBlock=Ot(t.toBlock)||void 0),e}decode(t){t.data=t.data||"";let e=bt(t.topics)&&yt(t.topics[0])?t.topics[0].slice(2):"",n=this._json.filter((function(t){return e===q(G(t))}))[0];return n?new Ee(this._requestManager,n,this._address).decode(t):jt(t)}async execute(t){let e=this.encode(t),n=this.decode.bind(this);return new ke(this._requestManager,e,n)}getAllEventsFunction(){return this.execute.bind(this)}}class Oe{constructor(t,e,n){var r;this.requestManager=t,this.abi=e,this.address=n,this.events={},this.transactionHash=null,this.address=n,this.abi=e,(r=this).abi.filter((function(t){return"function"===t.type})).map((function(t){return new Te(t)})).forEach((function(t){t.attachToContract(r)})),this.allEvents=function(t){let e=t.abi.filter((function(t){return"event"===t.type})),n=new Be(t.requestManager,e,t.address);return e.map((function(e){return new Ee(t.requestManager,e,t.address)})).forEach((function(e){e.attachToContract(t)})),n.getAllEventsFunction()}(this)}}t.AbstractFilter=Ae,t.BigNumber=M,t.Contract=Oe,t.ContractFactory=class{constructor(t,e){this.requestManager=t,this.abi=e}async deploy(...t){let e,n=t[t.length-1];if(wt(n)&&!bt(n)&&(e=t.pop()),!e)throw new Error("Missing options object");if(!e.data||"string"!=typeof e.data)throw new Error("Invalid options.data");if(K(e.value)>0&&!(this.abi.filter((function(e){return"constructor"===e.type&&e.inputs.length===t.length}))[0]||{}).payable)throw new Error("Cannot send value to non-payable constructor");let r=(o=this.abi,a=t,o.filter((function(t){return"constructor"===t.type&&t.inputs&&t.inputs.length===a.length})).map((function(t){return t.inputs||[]})).map((function(t){return Ne.encodeParams(t,a)}))[0]||"");var o,a;e.data+=r,e.gas||(e.gas=await this.requestManager.eth_estimateGas(e));const s=await this.requestManager.eth_sendTransaction(e);if(!s)throw new Error("Error while sending contract creation transaction. A TxHash was not retrieved");const c=await async function(t,e){const n=i();let r=0;const o=()=>{r++,r>50?n.reject(new Error("Contract transaction couldn't be found after 50 blocks")):t.eth_getTransactionReceipt(e).then((t=>{t&&t.blockHash?n.resolve(t):setTimeout(o,1e3)}),(t=>n.reject(t)))};o();const a=await n,s=await t.eth_getCode(a.contractAddress,"latest");if(s&&s.length>3)return a.contractAddress;throw Object.assign(new Error("The contract code couldn't be stored, please check your gas amount."),{response:s,receipt:a})}(this.requestManager,s),u=await this.at(c);return u.transactionHash=s,u}async at(t){if(!ht(t))throw new TypeError(`Invalid address ${JSON.stringify(t)}`);return new Oe(this.requestManager,this.abi,t)}},t.EthBlockFilter=class extends ke{constructor(t){super(t,{})}async getNewFilter(){return this.requestManager.eth_newBlockFilter()}},t.EthFilter=ke,t.EthPendingTransactionFilter=class extends ke{constructor(t){super(t,{})}async getNewFilter(){return this.requestManager.eth_newPendingTransactionFilter()}},t.HTTPProvider=class{constructor(t,e={}){this.host=t,this.options=e,this.debug=!1,this.host=t||"http://localhost:8545"}send(){throw new Error("Sync requests are deprecated")}sendAsync(t,n){try{let r=null;if(r=t instanceof Array?t.map((t=>e(t))):e(t),"undefined"==typeof fetch)throw new Error("There is no global fetch object. Please install and import isomorphic-fetch");const o={body:JSON.stringify(r),method:"POST",headers:Object.assign(Object.assign({},this.options.headers),{"Content-Type":"application/json"})};this.debug&&console.log("SEND >> "+o.body),fetch(this.host,o).then((async t=>{if(t.ok){const e=await t.json();this.debug&&console.log("RECV << "+JSON.stringify(e)),e.error?n(Object.assign(new Error(e.error.json||e.error),e.error)):n(null,e)}else this.debug&&console.log("ERR << "+JSON.stringify(t)),n(new Error("External error. response code: "+t.status))}),(t=>{this.debug&&console.log("ERR << "+JSON.stringify(t)),n(t)}))}catch(t){this.debug&&console.log("ERR << "+JSON.stringify(t)),n(t)}}},t.Method=qt,t.Property=Ht,t.RequestManager=zt,t.SHHFilter=class extends Ae{constructor(t,e){super(t),this.requestManager=t,this.options=e,this.options=this.options||{topics:[]},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(t){return xe(t)})),this.options={topics:this.options.topics,to:this.options.to}}async getMessages(){const t=await this.filterId;return this.requestManager.shh_getMessages(t)}async getNewFilter(){return this.requestManager.shh_newFilter(this.options)}async getChanges(){const t=await this.filterId;return this.requestManager.shh_getFilterChanges(t)}async uninstall(){const t=await this.filterId;return this.requestManager.shh_uninstallFilter(t)}},t.SolidityEvent=Ee,t.SolidityFunction=Te,t.WebSocketProvider=class{constructor(t,e={}){this.url=t,this.options=e,this.isDisposed=!1,this.responseCallbacks=new Map,this.notificationCallbacks=new Set,this.debug=!1,this.lastChunk="",this.connect()}dispose(){this.isDisposed=!0;const t=this.connection;this.timeout(new Error("Provider disposed.")),t.then((t=>t.close()))}send(){throw new Error("Sync requests are deprecated")}sendAsync(t,n){const r=[];let o;if(t instanceof Array)o=Promise.all(t.map((t=>{const n=i();try{const o=e(t);r.push(o),this.responseCallbacks.set(o.id,n)}catch(t){n.reject(t)}return n})));else{const n=i();try{const o=e(t);r.push(o),this.responseCallbacks.set(o.id,n)}catch(t){n.reject(t)}o=n}o.then((t=>n(null,t)),(t=>n(t))),this.connection.then((t=>{r.forEach((e=>{const n=JSON.stringify(e);this.debug&&console.log("SEND >> "+n),t.send(n)}))}),(t=>{n(t)}))}parseResponse(t){let e=[];return t.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((t=>{let n=t;this.lastChunk&&(n=this.lastChunk+n);let r=null;try{r=JSON.parse(n)}catch(t){return this.lastChunk=n,clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.timeout()}),15e3))}clearTimeout(this.lastChunkTimeout),this.lastChunk="",r&&e.push(r)})),e}processMessage(t){if("id"in t){const e=t.id,n=this.responseCallbacks.get(e);if(!n)return void console.error("Error: Received a response for an unknown request",t);this.responseCallbacks.delete(e),"error"in t?n.reject(Object.assign(new Error(t.error.message||t.error),t.error)):"result"in t&&n.resolve(t)}else this.notificationCallbacks.forEach((e=>e(null,t)))}timeout(t){this.connection&&this.connection.isPending||(this.connection=i());const e=t||new Error("Connection timeout");this.responseCallbacks.forEach((t=>t.reject(e))),this.responseCallbacks.clear(),this.isDisposed||this.connect()}connect(){this.connection&&!this.connection.isPending&&this.connection.then((t=>t.close())),this.connection&&this.connection.isPending||(this.connection=i()),this.lastChunk="";let t=this.options.WebSocketConstructor||("undefined"!=typeof WebSocket?WebSocket:void 0);if(!t)throw new Error("Please provide a WebSocketConstructor");const e=new t(this.url,this.options.protocol);e.onopen=()=>{this.connection.resolve(e)},e.onerror=t=>{const e=new Error("Error in web socket");e.data=t,this.timeout(e)},e.onclose=t=>{this.timeout(new Error(`Connection closed (${t&&t.reason||"Unknown reason"})`))},e.onmessage=t=>{let e="string"==typeof t.data?t.data:"";this.debug&&console.log("RECV << "+t.data),this.parseResponse(e).forEach((t=>{t instanceof Array?t.forEach((t=>this.processMessage(t))):this.processMessage(t)}))}}},t.bytesToHex=L,t.bytesToUtf8String=P,t.concatBytes=z,t.default=zt,t.extractDisplayName=J,t.extractTypeName=V,t.fromAscii=function(t,e=0){let n="";for(let e=0;e<t.length;e++){let r=t.charCodeAt(e).toString(16);n+=r.length<2?"0"+r:r}return"0x"+n.padEnd(e,"0")},t.fromDecimal=et,t.fromTwosComplement=ut,t.fromWei=function(t,e){let n=ot(t).dividedBy(rt(e));return mt(t)?n:n.toString(10)},t.getAddress=ct,t.getValueOfUnit=rt,t.hexToBytes=D,t.isAddress=ht,t.isArray=bt,t.isBigNumber=mt,t.isBloom=function(t){return!!/^(0x)?[0-9a-f]{512}$/i.test(t)&&!!/^(0x)?[0-9a-f]{512}$/i.test(t)},t.isBoolean=vt,t.isChecksumAddress=pt,t.isFunction=function(t){return"function"==typeof t},t.isHex=function(t){return"string"==typeof t&&/^0x[0-9a-fA-F]+$/.test(t)},t.isJson=function(t){try{return!!JSON.parse(t)}catch(t){return!1}},t.isObject=wt,t.isStrictAddress=lt,t.isString=yt,t.isTopic=function(t){return!!/^(0x)?[0-9a-f]{64}$/i.test(t)&&!!/^(0x)?[0-9a-f]{64}$/i.test(t)},t.isValidResponse=xt,t.padLeft=$,t.padRight=function(t,e,n){return t+new Array(e-t.length+1).join(n||"0")},t.sha3=q,t.signedIsNegative=st,t.stringToUtf8Bytes=R,t.toAddress=gt,t.toArray=dt,t.toAscii=function(t){let e="",n=0,r=t.length;for("0x"===t.substring(0,2)&&(n=2);n<r;n+=2){let r=parseInt(t.substr(n,2),16);e+=String.fromCharCode(r)}return e},t.toBatchPayload=function(t){return t.map((function(t){return Tt(t.method,t.params)}))},t.toBigNumber=ot,t.toBoolean=tt,t.toChecksumAddress=ft,t.toData=X,t.toDecimal=K,t.toHex=nt,t.toJsonRpcRequest=Tt,t.toNullDecimal=Y,t.toString=Z,t.toStringData=Q,t.toTwosComplement=at,t.toWei=function(t,e){let n=ot(t).times(rt(e));return mt(t)?n:n.toString(10)},t.transformToFullName=G,Object.defineProperty(t,"__esModule",{value:!0})}(e)}(0,y.exports);var w,v,b,_,F=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"_balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"_owner",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],N=[{constant:!0,inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"_id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];t.Type=void 0,(w=t.Type||(t.Type={}))[w.NFT=0]="NFT",w[w.HASWEARABLES=1]="HASWEARABLES",w[w.WEARABLESON=2]="WEARABLESON",w[w.ADDRESS=3]="ADDRESS",t.Match=void 0,(v=t.Match||(t.Match={}))[v.ANY=0]="ANY",v[v.ALL=1]="ALL",t.ChainType=void 0,(b=t.ChainType||(t.ChainType={}))[b.ETH=0]="ETH",b[b.POLYGON=1]="POLYGON",t.NFTType=void 0,(_=t.NFTType||(t.NFTType={}))[_.ERC721=0]="ERC721",_[_.ERC1155=1]="ERC1155";var T=new BasicMaterial;T.texture=new Texture("https://lsnft.mypinata.cloud/ipfs/QmaqcRuouE6Tip9acZmjxMyBftEA5aHASRDjn8Bmad87Ld"),T.alphaTest=1;var x=new Material;x.albedoColor=new Color4(.2,.1,.9,.3);var A=function(t){function e(e){var n=t.call(this,e.name)||this;n.data=e,n.addComponent(new BoxShape),n.addComponent(new Transform(e.transform)),executeTask((function(){return d(n,void 0,void 0,(function(){var t;return g(this,(function(n){switch(n.label){case 0:return(t=e.debug)?[4,s.isPreviewMode()]:[3,2];case 1:t=n.sent(),n.label=2;case 2:return t?(this.addComponent(x),this.getComponent(BoxShape).withCollisions=!1):this.addComponent(T),[2]}}))}))}));var r=n.getComponent(Transform).scale.clone();return n.addComponent(new h.TriggerComponent(new h.TriggerBoxShape(new Vector3(r.x+.7,r.y+.7,r.z+.7),new Vector3(0,0,0)),{enableDebug:!1,onCameraEnter:function(){e.deniedMessage&&p.displayAnnouncement(e.deniedMessage),e.onDenied&&e.onDenied()}})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.updateDeniedAction=function(t){this.data.onDenied=t},e.prototype.updateDeniedMessage=function(t){this.data.deniedMessage=t},e}(Entity);function k(t){return d(this,void 0,void 0,(function(){var e,n,o;return g(this,(function(i){switch(i.label){case 0:return[4,r.getUserData()];case 1:if(null==(e=i.sent())?void 0:e.hasConnectedWeb3){for(n=[],o=0;o<t.allowedAddresses.length;o++)n.push(t.allowedAddresses[o].toLowerCase());return-1!=n.indexOf(e.publicKey.toLowerCase())?[2,!0]:[2,!1]}return[2,!1]}}))}))}function E(e){return d(this,void 0,void 0,(function(){var n,o,i,a,s,c,u,h,p,f,d,y,w,v,b,_,F,N,T,x,A;return g(this,(function(g){switch(g.label){case 0:return n=e.wearables?e.wearables:[],[4,r.getUserData()];case 1:return(null==(o=g.sent())?void 0:o.hasConnectedWeb3)?e.type!=t.Type.HASWEARABLES?[3,3]:[4,l.avatar.getUserInventory(o.publicKey?o.publicKey:"")]:[3,5];case 2:if(i=g.sent(),e.wearablesMatch!=t.Match.ANY){for(f=0,d=0;d<n.length;d++)try{for(_=void 0,c=m(i),u=c.next();!u.done;u=c.next())u.value===n[d]&&f++}catch(t){_={error:t}}finally{try{u&&!u.done&&(F=c.return)&&F.call(c)}finally{if(_)throw _.error}}return f>=n.length?[2,!0]:[2,!1]}for(d=0;d<n.length;d++)try{for(v=void 0,a=m(i),s=a.next();!s.done;s=a.next())if(s.value===n[d])return[2,!0]}catch(t){v={error:t}}finally{try{s&&!s.done&&(b=a.return)&&b.call(a)}finally{if(v)throw v.error}}return[3,4];case 3:if(log("Currently wearing: ",o.avatar.wearables),e.wearablesMatch!=t.Match.ANY){for(f=0,d=0;d<n.length;d++)try{for(x=void 0,y=m(o.avatar.wearables),w=y.next();!w.done;w=y.next())w.value===n[d]&&f++}catch(t){x={error:t}}finally{try{w&&!w.done&&(A=y.return)&&A.call(y)}finally{if(x)throw x.error}}return f>=n.length?[2,!0]:[2,!1]}for(d=0;d<n.length;d++)try{for(N=void 0,h=m(o.avatar.wearables),p=h.next();!p.done;p=h.next())if(p.value===n[d])return[2,!0]}catch(t){N={error:t}}finally{try{p&&!p.done&&(T=h.return)&&T.call(h)}finally{if(N)throw N.error}}g.label=4;case 4:return[3,6];case 5:return[2,!1];case 6:return[2]}}))}))}function B(e){return d(this,void 0,void 0,(function(){var r,o,i,a,s,c,l;return g(this,(function(h){switch(h.label){case 0:return h.trys.push([0,11,,12]),log("checking L2 nft"),[4,n.getProvider()];case 1:return r=h.sent(),new y.exports.RequestManager(r),o=new y.exports.WebSocketProvider("wss://rpc-mainnet.matic.quiknode.pro"),[4,u.getUserAccount()];case 2:return i=h.sent(),a=new y.exports.RequestManager(o),[4,new y.exports.ContractFactory(a,e.nftType==t.NFTType.ERC721?F:N).at(e.contract?e.contract:"")];case 3:return s=h.sent(),c=void 0,e.tokenId?e.nftType!=t.NFTType.ERC721?[3,5]:[4,s.ownerOf(e.tokenId)]:[3,8];case 4:return(c=h.sent()).toLowerCase()==i.toLowerCase()?[2,!0]:[2,!1];case 5:return[4,s.balanceOf(i,e.tokenId)];case 6:case 9:return c=h.sent(),log("L2 balance of is",c),c>0?[2,!0]:[2,!1];case 7:return[3,10];case 8:return[4,s.balanceOf(i)];case 10:return[3,12];case 11:return l=h.sent(),log(l),[2,!1];case 12:return[2]}}))}))}function O(e){return d(this,void 0,void 0,(function(){var r,o,i,a,s,c;return g(this,(function(l){switch(l.label){case 0:log(e),l.label=1;case 1:return l.trys.push([1,12,,13]),[4,u.getUserAccount()];case 2:return r=l.sent(),[4,n.getProvider()];case 3:return o=l.sent(),i=new y.exports.RequestManager(o),[4,new y.exports.ContractFactory(i,e.nftType==t.NFTType.ERC721?F:N).at(e.contract?e.contract:"")];case 4:return a=l.sent(),s=void 0,e.tokenId?e.nftType!=t.NFTType.ERC721?[3,6]:[4,a.ownerOf(e.tokenId)]:[3,9];case 5:return(s=l.sent()).toLowerCase()==r.toLowerCase()?[2,!0]:[2,!1];case 6:return[4,a.balanceOf(r,e.tokenId)];case 7:return s=l.sent(),log("L1 balance of is",s),s>0?[2,!0]:[2,!1];case 8:return[3,11];case 9:return[4,a.balanceOf(r)];case 10:return s=l.sent(),log("L1 balance of is",s),s>0?[2,!0]:[2,!1];case 11:return[3,13];case 12:return c=l.sent(),log(c),[2,!1];case 13:return[2]}}))}))}t.createArea=function(e){var n=this,r=new A(e);return engine.addEntity(r),executeTask((function(){return d(n,void 0,void 0,(function(){var n;return g(this,(function(o){switch(o.label){case 0:switch(o.trys.push([0,12,,13]),e.type){case t.Type.NFT:return[3,1];case t.Type.ADDRESS:return[3,6];case t.Type.HASWEARABLES:case t.Type.WEARABLESON:return[3,9]}return[3,11];case 1:return log("checking nft"),e.chain!=t.ChainType.ETH?[3,3]:[4,O(e)];case 2:return n=o.sent(),[3,5];case 3:return[4,B(e)];case 4:n=o.sent(),o.label=5;case 5:return n&&(log("we have nft holder"),engine.removeEntity(r)),[3,11];case 6:return log("checking Addresses"),e.allowedAddresses?[4,k(e)]:[3,8];case 7:o.sent()&&engine.removeEntity(r),o.label=8;case 8:return[3,11];case 9:return log("checking wearables"),[4,E(e)];case 10:return o.sent()&&engine.removeEntity(r),[3,11];case 11:return[3,13];case 12:return o.sent(),[3,13];case 13:return[2]}}))}))})),r},Object.defineProperty(t,"__esModule",{value:!0})}));
